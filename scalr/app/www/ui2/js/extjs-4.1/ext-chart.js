/*
This file is part of Ext JS 4.1
*/
Ext.define("Ext.chart.Callout",{constructor:function(a){if(a.callouts){a.callouts.styles=Ext.applyIf(a.callouts.styles||{},{color:"#000",font:"11px Helvetica, sans-serif"});this.callouts=Ext.apply(this.callouts||{},a.callouts);this.calloutsArray=[]}},renderCallouts:function(){if(!this.callouts){return}var u=this,l=u.items,a=u.chart.animate,t=u.callouts,g=t.styles,e=u.calloutsArray,b=u.chart.store,r=b.getCount(),d=l.length/r,k=[],q,c,o,m,s,f,h,n;for(q=0,c=0;q<r;q++){for(o=0;o<d;o++){s=l[c];f=e[c];h=b.getAt(q);n=t.filter(h);if(!n&&!f){c++;continue}if(!f){e[c]=f=u.onCreateCallout(h,s,q,n,o,c)}for(m in f){if(f[m]&&f[m].setAttributes){f[m].setAttributes(g,true)}}if(!n){for(m in f){if(f[m]){if(f[m].setAttributes){f[m].setAttributes({hidden:true},true)}else{if(f[m].setVisible){f[m].setVisible(false)}}}}}t.renderer(f,h);u.onPlaceCallout(f,h,s,q,n,a,o,c,k);k.push(f);c++}}this.hideCallouts(c)},onCreateCallout:function(f,m,e,h){var j=this,k=j.calloutsGroup,d=j.callouts,n=d.styles,c=n.width,l=n.height,g=j.chart,b=g.surface,a={lines:false};a.lines=b.add(Ext.apply({},{type:"path",path:"M0,0",stroke:j.getLegendColor()||"#555"},n));if(d.items){a.panel=new Ext.Panel({style:"position: absolute;",width:c,height:l,items:d.items,renderTo:g.el})}return a},hideCallouts:function(b){var d=this.calloutsArray,a=d.length,e,c;while(a-->b){e=d[a];for(c in e){if(e[c]){e[c].hide(true)}}}}});Ext.define("Ext.chart.Navigation",{constructor:function(){this.originalStore=this.store},setZoom:function(j){var h=this,f=h.axes,a=f.items,e,g,c,o=h.chartBBox,n=1/o.width,b=1/o.height,d={x:j.x*n,y:j.y*b,width:j.width*n,height:j.height*b},k,m,l;for(e=0,g=a.length;e<g;e++){c=a[e];k=c.calcEnds();if(c.position=="bottom"||c.position=="top"){m=(k.to-k.from)*d.x+k.from;l=(k.to-k.from)*d.width+m;c.minimum=m;c.maximum=l}else{l=(k.to-k.from)*(1-d.y)+k.from;m=l-(k.to-k.from)*d.height;c.minimum=m;c.maximum=l}}h.redraw(false)},restoreZoom:function(){if(this.originalStore){this.store=this.substore=this.originalStore;this.redraw(true)}}});Ext.define("Ext.chart.Shape",{singleton:true,circle:function(a,b){return a.add(Ext.apply({type:"circle",x:b.x,y:b.y,stroke:null,radius:b.radius},b))},line:function(a,b){return a.add(Ext.apply({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius/5},b))},square:function(a,b){return a.add(Ext.applyIf({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius,radius:null},b))},triangle:function(a,b){b.radius*=1.75;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(b.x,",",b.y,"m0-",b.radius*0.58,"l",b.radius*0.5,",",b.radius*0.87,"-",b.radius,",0z")},b))},diamond:function(a,c){var b=c.radius;b*=1.5;return a.add(Ext.apply({type:"path",stroke:null,path:["M",c.x,c.y-b,"l",b,b,-b,b,-b,-b,b,-b,"z"]},c))},cross:function(a,c){var b=c.radius;b=b/1.7;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(c.x-b,",",c.y,"l",[-b,-b,b,-b,b,b,b,-b,b,b,-b,b,b,b,-b,b,-b,-b,-b,b,-b,-b,"z"])},c))},plus:function(a,c){var b=c.radius/1.3;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(c.x-b/2,",",c.y-b/2,"l",[0,-b,b,0,0,b,b,0,0,b,-b,0,0,b,-b,0,0,-b,-b,0,0,-b,"z"])},c))},arrow:function(a,c){var b=c.radius;return a.add(Ext.apply({type:"path",path:"M".concat(c.x-b*0.7,",",c.y-b*0.4,"l",[b*0.6,0,0,-b*0.4,b,b*0.8,-b,b*0.8,0,-b*0.4,-b*0.6,0],"z")},c))},drop:function(b,a,f,e,c,d){c=c||30;d=d||0;b.add({type:"path",path:["M",a,f,"l",c,0,"A",c*0.4,c*0.4,0,1,0,a+c*0.7,f-c*0.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-d,x:a,y:f}});d=(d+90)*Math.PI/180;b.add({type:"text",x:a+c*Math.sin(d)-10,y:f+c*Math.cos(d)+5,text:e,"font-size":c*12/40,stroke:"none",fill:"#fff"})}});Ext.define("Ext.chart.Label",{requires:["Ext.draw.Color"],colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(a){var b=this;b.label=Ext.applyIf(b.label||{},{display:"none",color:"#000",field:"name",minMargin:50,font:"11px Helvetica, sans-serif",orientation:"horizontal",renderer:function(c){return c}});if(b.label.display!=="none"){b.labelsGroup=b.chart.surface.getGroup(b.seriesId+"-labels")}},renderLabels:function(){var n=this,K=n.chart,w=K.gradients,q=n.items,G=K.animate,z=n.label,t=z.display,u=z.color,d=[].concat(z.field),p=n.labelsGroup,h=(p||0)&&p.length,b=n.chart.getChartStore(),o=b.getCount(),g=(q||0)&&q.length,C=g/o,y=(w||0)&&w.length,l=Ext.draw.Color,J=[],m,I,D,c,x,H,F,e,f,s,v,E,L,r,M,B,A,a;if(t=="none"){return}if(g==0){while(h--){J.push(h)}}else{for(I=0,D=0,c=0;I<o;I++){x=0;for(H=0;H<C;H++){v=q[D];E=p.getAt(c);L=b.getAt(I);while(this.__excludes&&this.__excludes[x]){x++}if(!v&&E){E.hide(true);c++}if(v&&d[H]){if(!E){E=n.onCreateLabel(L,v,I,t,H,x)}n.onPlaceLabel(E,L,v,I,t,G,H,x);c++;if(z.contrast&&v.sprite){r=v.sprite;if(r._endStyle){a=r._endStyle.fill}else{if(r._to){a=r._to.fill}else{a=r.attr.fill}}a=a||r.attr.fill;M=l.fromString(a);if(a&&!M){a=a.match(n.colorStringRe)[1];for(F=0;F<y;F++){m=w[F];if(m.id==a){s=0;e=0;for(f in m.stops){s++;e+=l.fromString(m.stops[f].color).getGrayscale()}B=(e/s)/255;break}}}else{B=M.getGrayscale()/255}if(E.isOutside){B=1}A=l.fromString(E.attr.color||E.attr.fill).getHSL();A[2]=B>0.5?0.2:0.8;E.setAttributes({fill:String(l.fromHSL.apply({},A))},true)}}D++;x++}}h=p.length;while(h>c){J.push(c);c++}}n.hideLabels(J)},hideLabels:function(b){var a=this.labelsGroup,c=!!b&&b.length;if(!a){return}if(c===false){c=a.getCount();while(c--){a.getAt(c).hide(true)}}else{while(c--){a.getAt(b[c]).hide(true)}}}});Ext.define("Ext.chart.theme.Theme",{requires:["Ext.draw.Color"],theme:"Base",themeAttrs:false,initTheme:function(e){var d=this,b=Ext.chart.theme,c,a;if(e){e=e.split(":");for(c in b){if(c==e[0]){a=e[1]=="gradients";d.themeAttrs=new b[c]({useGradients:a});if(a){d.gradients=d.themeAttrs.gradients}if(d.themeAttrs.background){d.background=d.themeAttrs.background}return}}}}},function(){(function(){Ext.chart.theme=function(c,b){c=c||{};var k=0,o=+new Date(),h,a,j,q,r,f,n,p,m=[],e,g;if(c.baseColor){e=Ext.draw.Color.fromString(c.baseColor);g=e.getHSL()[2];if(g<0.15){e=e.getLighter(0.3)}else{if(g<0.3){e=e.getLighter(0.15)}else{if(g>0.85){e=e.getDarker(0.3)}else{if(g>0.7){e=e.getDarker(0.15)}}}}c.colors=[e.getDarker(0.3).toString(),e.getDarker(0.15).toString(),e.toString(),e.getLighter(0.15).toString(),e.getLighter(0.3).toString()];delete c.baseColor}if(c.colors){a=c.colors.slice();r=b.markerThemes;q=b.seriesThemes;h=a.length;b.colors=a;for(;k<h;k++){j=a[k];n=r[k]||{};f=q[k]||{};n.fill=f.fill=n.stroke=f.stroke=j;r[k]=n;q[k]=f}b.markerThemes=r.slice(0,h);b.seriesThemes=q.slice(0,h)}for(p in b){if(p in c){if(Ext.isObject(c[p])&&Ext.isObject(b[p])){Ext.apply(b[p],c[p])}else{b[p]=c[p]}}}if(c.useGradients){a=b.colors||(function(){var d=[];for(k=0,q=b.seriesThemes,h=q.length;k<h;k++){d.push(q[k].fill||q[k].stroke)}return d}());for(k=0,h=a.length;k<h;k++){e=Ext.draw.Color.fromString(a[k]);if(e){j=e.getDarker(0.1).toString();e=e.toString();p="theme-"+e.substr(1)+"-"+j.substr(1)+"-"+o;m.push({id:p,angle:45,stops:{0:{color:e.toString()},100:{color:j.toString()}}});a[k]="url(#"+p+")"}}b.gradients=m;b.colors=a}Ext.apply(this,b)}}())});Ext.define("Ext.chart.theme.Base",{requires:["Ext.chart.theme.Theme"],constructor:function(a){Ext.chart.theme.call(this,a,{background:false,axis:{stroke:"#444","stroke-width":1},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelRight:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelBottom:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelLeft:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{stroke:"#555",radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#115fa6",type:"plus"},{fill:"#94ae0a",type:"circle"},{fill:"#a61120",type:"cross"}]})}},function(){var c=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],h=["Green","Sky","Red","Purple","Blue","Yellow"],g=0,f=0,b=c.length,a=Ext.chart.theme,d=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],e=d.length;for(;g<b;g++){a[h[g]]=(function(i){return Ext.extend(a.Base,{constructor:function(j){a.Base.prototype.constructor.call(this,Ext.apply({baseColor:i},j))}})}(c[g]))}for(g=0;g<e;g++){a["Category"+(g+1)]=(function(i){return Ext.extend(a.Base,{constructor:function(j){a.Base.prototype.constructor.call(this,Ext.apply({colors:i},j))}})}(d[g]))}});Ext.define("Ext.chart.LegendItem",{extend:"Ext.draw.CompositeSprite",requires:["Ext.chart.Shape"],x:0,y:0,zIndex:500,boldRe:/bold\s\d{1,}.*/i,constructor:function(a){this.callParent(arguments);this.createLegend(a)},createLegend:function(r){var s=this,h=r.yFieldIndex,k=s.series,a=k.type,l=s.yFieldIndex,d=s.legend,o=s.surface,p=d.x+s.x,m=d.y+s.y,c,j=s.zIndex,b,i,q,e,n=false,g=Ext.apply(k.seriesStyle,k.style);function f(t){var u=k[t];return(Ext.isArray(u)?u[l]:u)}i=s.add("label",o.add({type:"text",x:20,y:0,zIndex:(j||0)+2,fill:d.labelColor,font:d.labelFont,text:f("title")||f("yField"),style:{cursor:"pointer"}}));if(a==="line"||a==="scatter"){if(a==="line"){s.add("line",o.add({type:"path",path:"M0.5,0.5L16.5,0.5",zIndex:(j||0)+2,"stroke-width":k.lineWidth,"stroke-linejoin":"round","stroke-dasharray":k.dash,stroke:g.stroke||k.getLegendColor(h)||"#000",style:{cursor:"pointer"}}))}if(k.showMarkers||a==="scatter"){b=Ext.apply(k.markerStyle,k.markerConfig||{},{fill:k.getLegendColor(h)});s.add("marker",Ext.chart.Shape[b.type](o,{fill:b.fill,x:8.5,y:0.5,zIndex:(j||0)+2,radius:b.radius||b.size,style:{cursor:"pointer"}}))}}else{s.add("box",o.add({type:"rect",zIndex:(j||0)+2,x:0,y:0,width:12,height:12,fill:k.getLegendColor(h),style:{cursor:"pointer"}}))}s.setAttributes({hidden:false},true);c=s.getBBox();q=s.add("mask",o.add({type:"rect",x:c.x,y:c.y,width:c.width||20,height:c.height||20,zIndex:(j||0)+1,fill:s.legend.boxFill,style:{cursor:"pointer"}}));s.on("mouseover",function(){i.setStyle({"font-weight":"bold"});q.setStyle({cursor:"pointer"});k._index=h;k.highlightItem()},s);s.on("mouseout",function(){i.setStyle({"font-weight":d.labelFont&&s.boldRe.test(d.labelFont)?"bold":"normal"});k._index=h;k.unHighlightItem()},s);if(!k.visibleInLegend(h)){n=true;i.setAttributes({opacity:0.5},true)}s.on("mousedown",function(){if(!n){k.hideAll(h);i.setAttributes({opacity:0.5},true)}else{k.showAll(h);i.setAttributes({opacity:1},true)}n=!n;s.legend.chart.redraw()},s);s.updatePosition({x:0,y:0})},updatePosition:function(c){var f=this,a=f.items,e=a.length,b=0,d;if(!c){c=f.legend}for(;b<e;b++){d=a[b];switch(d.type){case"text":d.setAttributes({x:20+c.x+f.x,y:c.y+f.y},true);break;case"rect":d.setAttributes({translate:{x:c.x+f.x,y:c.y+f.y-6}},true);break;default:d.setAttributes({translate:{x:c.x+f.x,y:c.y+f.y}},true)}}}});Ext.define("Ext.chart.Legend",{requires:["Ext.chart.LegendItem"],visible:true,update:true,position:"bottom",x:0,y:0,labelColor:"#000",labelFont:"12px Helvetica, sans-serif",boxStroke:"#000",boxStrokeWidth:1,boxFill:"#FFF",itemSpacing:10,padding:5,width:0,height:0,boxZIndex:100,constructor:function(a){var b=this;if(a){Ext.apply(b,a)}b.items=[];b.isVertical=("left|right|float".indexOf(b.position)!==-1);b.origX=b.x;b.origY=b.y},create:function(){var e=this,a=e.chart.series.items,c,d,b;e.createBox();if(e.rebuild!==false){e.createItems()}if(!e.created&&e.isDisplayed()){e.created=true;for(c=0,d=a.length;c<d;c++){b=a[c];b.on("titlechange",function(){e.create();e.updatePosition()})}}},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",true)!==-1},createItems:function(){var G=this,r=G.chart,b=r.series.items,n,p,z=r.surface,t=G.items,q=G.padding,J=G.itemSpacing,l=2,D=0,w=0,g=0,F=0,d=G.isVertical,f=Math,e=f.floor,I=f.max,k=0,B=0,C=t?t.length:0,o,m,h,E,a,s,v,u,c,H,A;if(C){for(;B<C;B++){t[B].destroy()}}t.length=[];for(B=0,n=b.length;B<n;B++){p=b[B];if(p.showInLegend){u=[].concat(p.yField);for(A=0,H=u.length;A<H;A++){c=u[A];E=new Ext.chart.LegendItem({legend:this,series:p,surface:r.surface,yFieldIndex:A});a=E.getBBox();v=a.width;s=a.height;if(B+A===0){h=d?q+s/2:q}else{h=J/(d?2:1)}E.x=e(d?q:g+h);E.y=e(d?F+h:q+s/2);g+=v+h;F+=s+h;D=I(D,v);w=I(w,s);t.push(E)}}}G.width=e((d?D:g)+q*2);if(d&&t.length===1){l=1}G.height=e((d?F-l*h:w)+(q*2));G.itemHeight=w},getBBox:function(){var a=this;return{x:Math.round(a.x)-a.boxStrokeWidth/2,y:Math.round(a.y)-a.boxStrokeWidth/2,width:a.width,height:a.height}},createBox:function(){var b=this,a,c;if(b.boxSprite){b.boxSprite.destroy()}c=b.getBBox();if(isNaN(c.width)||isNaN(c.height)){b.boxSprite=false;return}a=b.boxSprite=b.chart.surface.add(Ext.apply({type:"rect",stroke:b.boxStroke,"stroke-width":b.boxStrokeWidth,fill:b.boxFill,zIndex:b.boxZIndex},c));a.redraw()},updatePosition:function(){var t=this,o=t.items,q,h,k,g,m=t.width||0,c=t.height||0,l=t.padding,n=t.chart,j=n.chartBBox,r=n.insetPadding,s=j.width-(r*2),d=j.height-(r*2),f=j.x+r,e=j.y+r,p=n.surface,b=Math.floor,a;if(t.isDisplayed()){switch(t.position){case"left":k=r;g=b(e+d/2-c/2);break;case"right":k=b(p.width-m)-r;g=b(e+d/2-c/2);break;case"top":k=b(f+s/2-m/2);g=r;break;case"bottom":k=b(f+s/2-m/2);g=b(p.height-c)-r;break;default:k=b(t.origX)+r;g=b(t.origY)+r}t.x=k;t.y=g;for(q=0,h=o.length;q<h;q++){o[q].updatePosition()}a=t.getBBox();if(isNaN(a.width)||isNaN(a.height)){if(t.boxSprite){t.boxSprite.hide(true)}}else{if(!t.boxSprite){t.createBox()}t.boxSprite.setAttributes(a,true);t.boxSprite.show(true)}}},toggle:function(b){var e=this,d=0,c=e.items,a=c.length;if(e.boxSprite){if(b){e.boxSprite.show(true)}else{e.boxSprite.hide(true)}}for(;d<a;++d){if(b){c[d].show(true)}else{c[d].hide(true)}}e.visible=b}});Ext.define("Ext.chart.Highlight",{requires:["Ext.fx.Anim"],highlight:false,highlightCfg:{fill:"#fdd","stroke-width":5,stroke:"#f55"},constructor:function(a){if(a.highlight){if(a.highlight!==true){this.highlightCfg=Ext.merge(this.highlightCfg,a.highlight)}}},highlightItem:function(j){if(!j){return}var f=this,i=j.sprite,a=Ext.merge({},f.highlightCfg,f.highlight),d=f.chart.surface,c=f.chart.animate,b,h,g,e;if(!f.highlight||!i||i._highlighted){return}if(i._anim){i._anim.paused=true}i._highlighted=true;if(!i._defaults){i._defaults=Ext.apply({},i.attr);h={};g={};for(b in a){if(!(b in i._defaults)){i._defaults[b]=d.availableAttrs[b]}h[b]=i._defaults[b];g[b]=a[b];if(Ext.isObject(a[b])){h[b]={};g[b]={};Ext.apply(i._defaults[b],i.attr[b]);Ext.apply(h[b],i._defaults[b]);for(e in i._defaults[b]){if(!(e in a[b])){g[b][e]=h[b][e]}else{g[b][e]=a[b][e]}}for(e in a[b]){if(!(e in g[b])){g[b][e]=a[b][e]}}}}i._from=h;i._to=g;i._endStyle=g}if(c){i._anim=new Ext.fx.Anim({target:i,from:i._from,to:i._to,duration:150})}else{i.setAttributes(i._to,true)}},unHighlightItem:function(){if(!this.highlight||!this.items){return}var h=this,g=h.items,f=g.length,a=Ext.merge({},h.highlightCfg,h.highlight),c=h.chart.animate,e=0,d,b,j;for(;e<f;e++){if(!g[e]){continue}j=g[e].sprite;if(j&&j._highlighted){if(j._anim){j._anim.paused=true}d={};for(b in a){if(Ext.isObject(j._defaults[b])){d[b]={};Ext.apply(d[b],j._defaults[b])}else{d[b]=j._defaults[b]}}if(c){j._endStyle=d;j._anim=new Ext.fx.Anim({target:j,to:d,duration:150})}else{j.setAttributes(d,true)}delete j._highlighted}}},cleanHighlights:function(){if(!this.highlight){return}var d=this.group,c=this.markerGroup,b=0,a;for(a=d.getCount();b<a;b++){delete d.getAt(b)._defaults}if(c){for(a=c.getCount();b<a;b++){delete c.getAt(b)._defaults}}}});Ext.define("Ext.chart.MaskLayer",{extend:"Ext.Component",constructor:function(a){a=Ext.apply(a||{},{style:"position:absolute;background-color:#888;cursor:move;opacity:0.6;border:1px solid #222;"});this.callParent([a])},initComponent:function(){var a=this;a.callParent(arguments);a.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave")},initDraggable:function(){this.callParent(arguments);this.dd.onStart=function(c){var b=this,a=b.comp;this.startPosition=a.getPosition(true);if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}}}});Ext.define("Ext.chart.Mask",{requires:["Ext.chart.MaskLayer"],constructor:function(a){var c=this,b;c.addEvents("select");if(a){Ext.apply(c,a)}if(c.enableMask){c.on("afterrender",function(){var d=new Ext.chart.MaskLayer({renderTo:c.el,hidden:true});d.el.on({mousemove:function(f){c.onMouseMove(f)},mouseup:function(f){c.resized(f)}});b=new Ext.resizer.Resizer({el:d.el,handles:"all",pinned:true});b.on({resize:function(f){c.resized(f)}});d.initDraggable();c.maskType=c.mask;c.mask=d;c.maskSprite=c.surface.add({type:"path",path:["M",0,0],zIndex:1001,opacity:0.7,hidden:true,stroke:"#444"})},c,{single:true})}},resized:function(d){var f=this,k=f.bbox||f.chartBBox,i=k.x,h=k.y,a=k.width,l=k.height,c=f.mask.getBox(true),g=Math.max,b=Math.min,m=c.x-i,j=c.y-h;m=g(m,i);j=g(j,h);m=b(m,a);j=b(j,l);c.x=m;c.y=j;f.fireEvent("select",f,c)},onMouseUp:function(c){var a=this,d=a.bbox||a.chartBBox,b=a.maskSelection;a.maskMouseDown=false;a.mouseDown=false;if(a.mouseMoved){a.onMouseMove(c);a.mouseMoved=false;a.fireEvent("select",a,{x:b.x-d.x,y:b.y-d.y,width:b.width,height:b.height})}},onMouseDown:function(b){var a=this;a.mouseDown=true;a.mouseMoved=false;a.maskMouseDown={x:b.getPageX()-a.el.getX(),y:b.getPageY()-a.el.getY()}},onMouseMove:function(s){var t=this,n=t.maskType,a=t.bbox||t.chartBBox,h=a.x,g=a.y,b=Math,p=b.floor,i=b.abs,m=b.min,o=b.max,j=p(g+a.height),l=p(h+a.width),d=s.getPageX(),c=s.getPageY(),r=d-t.el.getX(),q=c-t.el.getY(),f=t.maskMouseDown,k;t.mouseMoved=t.mouseDown;r=o(r,h);q=o(q,g);r=m(r,l);q=m(q,j);if(f&&t.mouseDown){if(n=="horizontal"){q=g;f.y=j;c=t.el.getY()+a.height+t.insetPadding}else{if(n=="vertical"){r=h;f.x=l}}l=f.x-r;j=f.y-q;k=["M",r,q,"l",l,0,0,j,-l,0,"z"];t.maskSelection={x:l>0?r:r+l,y:j>0?q:q+j,width:i(l),height:i(j)};t.mask.updateBox(t.maskSelection);t.mask.show();t.maskSprite.setAttributes({hidden:true},true)}else{if(n=="horizontal"){k=["M",r,g,"L",r,j]}else{if(n=="vertical"){k=["M",h,q,"L",l,q]}else{k=["M",r,g,"L",r,j,"M",h,q,"L",l,q]}}t.maskSprite.setAttributes({path:k,fill:t.maskMouseDown?t.maskSprite.stroke:false,"stroke-width":n===true?1:3,hidden:false},true)}},onMouseLeave:function(b){var a=this;a.mouseMoved=false;a.mouseDown=false;a.maskMouseDown=false;a.mask.hide();a.maskSprite.hide(true)}});Ext.define("Ext.chart.Chart",{alias:"widget.chart",extend:"Ext.draw.Component",mixins:{themeManager:"Ext.chart.theme.Theme",mask:"Ext.chart.Mask",navigation:"Ext.chart.Navigation",bindable:"Ext.util.Bindable",observable:"Ext.util.Observable"},uses:["Ext.chart.series.Series"],requires:["Ext.util.MixedCollection","Ext.data.StoreManager","Ext.chart.Legend","Ext.chart.theme.Base","Ext.chart.theme.Theme","Ext.util.DelayedTask"],viewBox:false,animate:false,legend:false,insetPadding:10,enginePriority:["Svg","Vml"],background:false,constructor:function(b){var c=this,a;b=Ext.apply({},b);c.initTheme(b.theme||c.theme);if(c.gradients){Ext.apply(b,{gradients:c.gradients})}if(c.background){Ext.apply(b,{background:c.background})}if(b.animate){a={easing:"ease",duration:500};if(Ext.isObject(b.animate)){b.animate=Ext.applyIf(b.animate,a)}else{b.animate=a}}c.mixins.observable.constructor.call(c,b);if(b.enableMask){c.mixins.mask.constructor.call(c)}c.mixins.navigation.constructor.call(c);c.callParent([b])},getChartStore:function(){return this.substore||this.store},initComponent:function(){var b=this,c,a;b.callParent();b.addEvents("itemmousedown","itemmouseup","itemmouseover","itemmouseout","itemclick","itemdblclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh");Ext.applyIf(b,{zoom:{width:1,height:1,x:0,y:0}});b.maxGutter=[0,0];b.store=Ext.data.StoreManager.lookup(b.store);c=b.axes;b.axes=new Ext.util.MixedCollection(false,function(d){return d.position});if(c){b.axes.addAll(c)}a=b.series;b.series=new Ext.util.MixedCollection(false,function(d){return d.seriesId||(d.seriesId=Ext.id(null,"ext-chart-series-"))});if(a){b.series.addAll(a)}if(b.legend!==false){b.legend=new Ext.chart.Legend(Ext.applyIf({chart:b},b.legend))}b.on({mousemove:b.onMouseMove,mouseleave:b.onMouseLeave,mousedown:b.onMouseDown,mouseup:b.onMouseUp,click:b.onClick,dblclick:b.onDblClick,scope:b})},afterComponentLayout:function(b,a){var c=this;if(Ext.isNumber(b)&&Ext.isNumber(a)){if(b!==c.curWidth||a!==c.curHeight){c.curWidth=b;c.curHeight=a;c.redraw(true)}else{if(c.needsRedraw){delete c.needsRedraw;c.redraw()}}}this.callParent(arguments)},redraw:function(b){var g=this,f=g.series.items,d=f.length,a=g.axes.items,c=a.length,e,j=g.chartBBox={x:0,y:0,height:g.curHeight,width:g.curWidth},h=g.legend;g.surface.setSize(j.width,j.height);for(e=0;e<d;e++){g.initializeSeries(f[e],e)}for(e=0;e<c;e++){g.initializeAxis(a[e])}for(e=0;e<c;e++){a[e].processView()}for(e=0;e<c;e++){a[e].drawAxis(true)}if(h!==false&&h.visible){if(h.update||!h.created){h.create()}}g.alignAxes();if(h!==false&&h.visible){h.updatePosition()}g.getMaxGutter();g.resizing=!!b;for(e=0;e<c;e++){a[e].drawAxis()}for(e=0;e<d;e++){g.drawCharts(f[e])}g.resizing=false},afterRender:function(){var b,a=this;this.callParent();if(a.categoryNames){a.setCategoryNames(a.categoryNames)}if(a.tipRenderer){b=a.getFunctionRef(a.tipRenderer);a.setTipRenderer(b.fn,b.scope)}a.bindStore(a.store,true);a.refresh();if(a.surface.engine==="Vml"){a.on("added",a.onAddedVml,a);a.mon(Ext.container.Container.hierarchyEventSource,"added",a.onContainerAddedVml,a)}},onAddedVml:function(){this.needsRedraw=true},onContainerAddedVml:function(a){if(this.isDescendantOf(a)){this.needsRedraw=true}},getEventXY:function(d){var c=this,b=this.surface.getRegion(),g=d.getXY(),a=g[0]-b.left,f=g[1]-b.top;return[a,f]},onClick:function(a){this.handleClick("itemclick",a)},onDblClick:function(a){this.handleClick("itemdblclick",a)},handleClick:function(a,g){var j=this,f=j.getEventXY(g),d=j.series.items,b,h,c,k;for(b=0,h=d.length;b<h;b++){c=d[b];if(Ext.draw.Draw.withinBox(f[0],f[1],c.bbox)){if(c.getItemForPoint){k=c.getItemForPoint(f[0],f[1]);if(k){c.fireEvent(a,k)}}}}},onMouseDown:function(j){var h=this,a=h.getEventXY(j),b=h.series.items,d,g,c,f;if(h.enableMask){h.mixins.mask.onMouseDown.call(h,j)}for(d=0,g=b.length;d<g;d++){c=b[d];if(Ext.draw.Draw.withinBox(a[0],a[1],c.bbox)){if(c.getItemForPoint){f=c.getItemForPoint(a[0],a[1]);if(f){c.fireEvent("itemmousedown",f)}}}}},onMouseUp:function(j){var h=this,a=h.getEventXY(j),b=h.series.items,d,g,c,f;if(h.enableMask){h.mixins.mask.onMouseUp.call(h,j)}for(d=0,g=b.length;d<g;d++){c=b[d];if(Ext.draw.Draw.withinBox(a[0],a[1],c.bbox)){if(c.getItemForPoint){f=c.getItemForPoint(a[0],a[1]);if(f){c.fireEvent("itemmouseup",f)}}}}},onMouseMove:function(g){var j=this,d=j.getEventXY(g),c=j.series.items,a,h,b,m,k,f,l;if(j.enableMask){j.mixins.mask.onMouseMove.call(j,g)}for(a=0,h=c.length;a<h;a++){b=c[a];if(Ext.draw.Draw.withinBox(d[0],d[1],b.bbox)){if(b.getItemForPoint){m=b.getItemForPoint(d[0],d[1]);k=b._lastItemForPoint;f=b._lastStoreItem;l=b._lastStoreField;if(m!==k||m&&(m.storeItem!=f||m.storeField!=l)){if(k){b.fireEvent("itemmouseout",k);delete b._lastItemForPoint;delete b._lastStoreField;delete b._lastStoreItem}if(m){b.fireEvent("itemmouseover",m);b._lastItemForPoint=m;b._lastStoreItem=m.storeItem;b._lastStoreField=m.storeField}}}}else{k=b._lastItemForPoint;if(k){b.fireEvent("itemmouseout",k);delete b._lastItemForPoint;delete b._lastStoreField;delete b._lastStoreItem}}}},onMouseLeave:function(g){var f=this,a=f.series.items,c,d,b;if(f.enableMask){f.mixins.mask.onMouseLeave.call(f,g)}for(c=0,d=a.length;c<d;c++){b=a[c];delete b._lastItemForPoint}},delayRefresh:function(){var a=this;if(!a.refreshTask){a.refreshTask=new Ext.util.DelayedTask(a.refresh,a)}a.refreshTask.delay(a.refreshBuffer)},refresh:function(){var a=this;if(a.rendered&&a.curWidth!==undefined&&a.curHeight!==undefined){if(!a.isVisible(true)&&!a.refreshPending){a.setShowListeners("mon");a.refreshPending=true;return}if(a.fireEvent("beforerefresh",a)!==false){a.redraw();a.fireEvent("refresh",a)}}},onShow:function(){var a=this;a.callParent(arguments);if(a.refreshPending){a.delayRefresh();a.setShowListeners("mun")}delete a.refreshPending},setShowListeners:function(b){var a=this;a[b](Ext.container.Container.hierarchyEventSource,{scope:a,single:true,show:a.forceRefresh,expand:a.forceRefresh})},forceRefresh:function(a){var b=this;if(b.isDescendantOf(a)&&b.refreshPending){b.setShowListeners("mun");b.delayRefresh()}delete b.refreshPending},bindStore:function(a,b){var c=this;c.mixins.bindable.bindStore.apply(c,arguments);if(c.store&&!b){c.refresh()}},getStoreListeners:function(){var b=this.refresh,a=this.delayRefresh;return{refresh:b,add:a,remove:a,update:a,clear:b}},initializeAxis:function(b){var e=this,j=e.chartBBox,i=j.width,d=j.height,g=j.x,f=j.y,c=e.themeAttrs,a={chart:e};if(c){a.axisStyle=Ext.apply({},c.axis);a.axisLabelLeftStyle=Ext.apply({},c.axisLabelLeft);a.axisLabelRightStyle=Ext.apply({},c.axisLabelRight);a.axisLabelTopStyle=Ext.apply({},c.axisLabelTop);a.axisLabelBottomStyle=Ext.apply({},c.axisLabelBottom);a.axisTitleLeftStyle=Ext.apply({},c.axisTitleLeft);a.axisTitleRightStyle=Ext.apply({},c.axisTitleRight);a.axisTitleTopStyle=Ext.apply({},c.axisTitleTop);a.axisTitleBottomStyle=Ext.apply({},c.axisTitleBottom)}switch(b.position){case"top":Ext.apply(a,{length:i,width:d,x:g,y:f});break;case"bottom":Ext.apply(a,{length:i,width:d,x:g,y:d});break;case"left":Ext.apply(a,{length:d,width:i,x:g,y:d});break;case"right":Ext.apply(a,{length:d,width:i,x:i,y:d});break}if(!b.chart){Ext.apply(a,b);b=e.axes.replace(Ext.createByAlias("axis."+b.type.toLowerCase(),a))}else{Ext.apply(b,a)}},alignAxes:function(){var k=this,j=k.axes,a=j.items,e,o=k.legend,f=["top","right","bottom","left"],b,g,h,q,n=k.insetPadding,d={top:n,right:n,bottom:n,left:n},m,p,l;function c(s){var r=j.findIndex("position",s);return(r<0)?null:j.getAt(r)}for(g=0,h=f.length;g<h;g++){b=f[g];m=(b==="left"||b==="right");e=c(b);if(o!==false){if(o.position===b){p=o.getBBox();d[b]+=(m?p.width:p.height)+d[b]}}if(e&&e.bbox){p=e.bbox;d[b]+=(m?p.width:p.height)}}q={x:d.left,y:d.top,width:k.curWidth-d.left-d.right,height:k.curHeight-d.top-d.bottom};k.chartBBox=q;for(g=0,h=a.length;g<h;g++){e=a[g];l=e.position;m=(l==="left"||l==="right");e.x=(l==="right"?q.x+q.width:q.x);e.y=(l==="top"?q.y:q.y+q.height);e.width=(m?q.width:q.height);e.length=(m?q.height:q.width)}},initializeSeries:function(g,j){var h=this,d=h.themeAttrs,c,e,m,o,n,k=[],f=0,b,a={chart:h,seriesId:g.seriesId};if(d){m=d.seriesThemes;n=d.markerThemes;c=Ext.apply({},d.series);e=Ext.apply({},d.marker);a.seriesStyle=Ext.apply(c,m[j%m.length]);a.seriesLabelStyle=Ext.apply({},d.seriesLabel);a.markerStyle=Ext.apply(e,n[j%n.length]);if(d.colors){a.colorArrayStyle=d.colors}else{k=[];for(b=m.length;f<b;f++){o=m[f];if(o.fill||o.stroke){k.push(o.fill||o.stroke)}}if(k.length){a.colorArrayStyle=k}}a.seriesIdx=j}if(g instanceof Ext.chart.series.Series){Ext.apply(g,a)}else{Ext.applyIf(a,g);g=h.series.replace(Ext.createByAlias("series."+g.type.toLowerCase(),a))}if(g.initialize){g.initialize()}},getMaxGutter:function(){var f=this,a=f.series.items,d,e,c,b=[0,0],g;for(d=0,e=a.length;d<e;d++){c=a[d];g=c.getGutters&&c.getGutters()||[0,0];b[0]=Math.max(b[0],g[0]);b[1]=Math.max(b[1],g[1])}f.maxGutter=b},drawAxis:function(a){a.drawAxis()},drawCharts:function(a){a.triggerafterrender=false;a.drawSeries();if(!this.animate){a.fireEvent("afterrender")}},save:function(a){return Ext.draw.Surface.save(this.surface,a)},destroy:function(){Ext.destroy(this.surface);this.bindStore(null);this.callParent(arguments)}});Ext.define("Ext.chart.TipSurface",{extend:"Ext.draw.Component",spriteArray:false,renderFirst:true,constructor:function(a){this.callParent([a]);if(a.sprites){this.spriteArray=[].concat(a.sprites);delete a.sprites}},onRender:function(){var c=this,b=0,a=0,d,e;this.callParent(arguments);e=c.spriteArray;if(c.renderFirst&&e){c.renderFirst=false;for(a=e.length;b<a;b++){d=c.surface.add(e[b]);d.setAttributes({hidden:false},true)}}}});Ext.define("Ext.chart.axis.Abstract",{requires:["Ext.chart.Chart"],constructor:function(a){a=a||{};var b=this,c=a.position||"left";c=c.charAt(0).toUpperCase()+c.substring(1);a.label=Ext.apply(a["axisLabel"+c+"Style"]||{},a.label||{});a.axisTitleStyle=Ext.apply(a["axisTitle"+c+"Style"]||{},a.labelTitle||{});Ext.apply(b,a);b.fields=Ext.Array.from(b.fields);this.callParent();b.labels=[];b.getId();b.labelGroup=b.chart.surface.getGroup(b.axisId+"-labels")},alignment:null,grid:false,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},processView:Ext.emptyFn,drawAxis:Ext.emptyFn,addDisplayAndLabels:Ext.emptyFn});Ext.define("Ext.chart.axis.Axis",{extend:"Ext.chart.axis.Abstract",alternateClassName:"Ext.chart.Axis",requires:["Ext.draw.Draw"],forceMinMax:false,dashSize:3,position:"bottom",skipFirst:false,length:0,width:0,adjustEnd:true,majorTickSteps:false,applyData:Ext.emptyFn,getRange:function(){var B=this,o=B.chart,h=o.getChartStore(),D=h.data.items,n=o.series.items,C=B.position,p,a=Ext.chart.series,u=[],t=Infinity,x=-Infinity,c=B.position==="left"||B.position==="right",y,m,d,w,v,l=D.length,f,A={},s={},z=true,q,g,e,b,r;q=B.fields;for(w=0,m=q.length;w<m;w++){s[q[w]]=true}for(y=0,m=n.length;y<m;y++){if(n[y].seriesIsHidden){continue}if(!n[y].getAxesForXAndYFields){continue}p=n[y].getAxesForXAndYFields();if(p.xAxis&&p.xAxis!==C&&p.yAxis&&p.yAxis!==C){continue}if(a.Bar&&n[y] instanceof a.Bar&&!n[y].column){q=c?Ext.Array.from(n[y].xField):Ext.Array.from(n[y].yField)}else{q=c?Ext.Array.from(n[y].yField):Ext.Array.from(n[y].xField)}if(B.fields.length){for(w=0,d=q.length;w<d;w++){if(s[q[w]]){break}}if(w==d){continue}}if(f=n[y].stacked){if(a.Bar&&n[y] instanceof a.Bar){if(n[y].column!=c){f=false;z=false}}else{if(!c){f=false;z=false}}}if(f){g={};for(w=0;w<q.length;w++){if(z&&n[y].__excludes&&n[y].__excludes[w]){continue}if(!s[q[w]]){Ext.Logger.warn("Field `"+q[w]+"` is not included in the "+C+" axis config.")}s[q[w]]=g[q[w]]=true}u.push({fields:g,value:0})}else{if(!q||q.length==0){q=B.fields}for(w=0;w<q.length;w++){if(z&&n[y].__excludes&&n[y].__excludes[w]){continue}s[q[w]]=A[q[w]]=true}}}for(y=0;y<l;y++){e=D[y];for(v=0;v<u.length;v++){u[v].value=0}for(b in s){r=e.get(b);if(isNaN(r)){continue}if(r===undefined){r=0}if(A[b]){if(t>r){t=r}if(x<r){x=r}}for(v=0;v<u.length;v++){if(u[v].fields[b]){u[v].value+=r;if(t>0){t=0}if(x<u[v].value){x=u[v].value}}}}}if(!isFinite(x)){x=B.prevMax||0}if(!isFinite(t)){t=B.prevMin||0}if(t!=x&&(x!=Math.floor(x))){x=Math.floor(x)+1}if(!isNaN(B.minimum)){t=B.minimum}if(!isNaN(B.maximum)){x=B.maximum}if(t>=x){x=t+1}return{min:t,max:x}},calcEnds:function(){var g=this,d=g.getRange(),f=d.min,a=d.max,c,h,e,b;c=(Ext.isNumber(g.majorTickSteps)?g.majorTickSteps+1:g.steps);h=!(Ext.isNumber(g.maximum)&&Ext.isNumber(g.minimum)&&Ext.isNumber(g.majorTickSteps)&&g.majorTickSteps>0);e=Ext.draw.Draw.snapEnds(f,a,c,h);if(Ext.isNumber(g.maximum)){e.to=g.maximum;b=true}if(Ext.isNumber(g.minimum)){e.from=g.minimum;b=true}if(g.adjustMaximumByMajorUnit){e.to=Math.ceil(e.to/e.step)*e.step;b=true}if(g.adjustMinimumByMajorUnit){e.from=Math.floor(e.from/e.step)*e.step;b=true}if(b){e.steps=Math.ceil((e.to-e.from)/e.step)}g.prevMin=(f==a?0:f);g.prevMax=a;return e},drawAxis:function(q){var B=this,r,h=B.x,g=B.y,z=B.chart.maxGutter[0],w=B.chart.maxGutter[1],e=B.dashSize,v=B.minorTickSteps||0,u=B.minorTickSteps||0,b=B.length,C=B.position,f=[],l=false,c=B.applyData(),d=c.step,s=c.steps,p=c.from,a=c.to,t,o,n,m,k,j,A;if(B.hidden||isNaN(d)||(p>a)){return}B.from=c.from;B.to=c.to;if(C=="left"||C=="right"){o=Math.floor(h)+0.5;m=["M",o,g,"l",0,-b];t=b-(w*2)}else{n=Math.floor(g)+0.5;m=["M",h,n,"l",b,0];t=b-(z*2)}A=s&&t/s;k=Math.max(v+1,0);j=Math.max(u+1,0);if(B.type=="Numeric"||B.type=="Time"){l=true;B.labels=[c.from]}if(C=="right"||C=="left"){n=g-w;o=h-((C=="left")*e*2);while(n>=g-w-t){m.push("M",o,Math.floor(n)+0.5,"l",e*2+1,0);if(n!=g-w){for(r=1;r<j;r++){m.push("M",o+e,Math.floor(n+A*r/j)+0.5,"l",e+1,0)}}f.push([Math.floor(h),Math.floor(n)]);n-=A;if(l){B.labels.push(B.labels[B.labels.length-1]+d)}if(A===0){break}}if(Math.round(n+A-(g-w-t))){m.push("M",o,Math.floor(g-b+w)+0.5,"l",e*2+1,0);for(r=1;r<j;r++){m.push("M",o+e,Math.floor(g-b+w+A*r/j)+0.5,"l",e+1,0)}f.push([Math.floor(h),Math.floor(n)]);if(l){B.labels.push(B.labels[B.labels.length-1]+d)}}}else{o=h+z;n=g-((C=="top")*e*2);while(o<=h+z+t){m.push("M",Math.floor(o)+0.5,n,"l",0,e*2+1);if(o!=h+z){for(r=1;r<k;r++){m.push("M",Math.floor(o-A*r/k)+0.5,n,"l",0,e+1)}}f.push([Math.floor(o),Math.floor(g)]);o+=A;if(l){B.labels.push(B.labels[B.labels.length-1]+d)}if(A===0){break}}if(Math.round(o-A-(h+z+t))){m.push("M",Math.floor(h+b-z)+0.5,n,"l",0,e*2+1);for(r=1;r<k;r++){m.push("M",Math.floor(h+b-z-A*r/k)+0.5,n,"l",0,e+1)}f.push([Math.floor(o),Math.floor(g)]);if(l){B.labels.push(B.labels[B.labels.length-1]+d)}}}if(l){B.labels[f.length-1]=+(B.labels[f.length-1]).toFixed(10)}if(!B.axis){B.axis=B.chart.surface.add(Ext.apply({type:"path",path:m},B.axisStyle))}B.axis.setAttributes({path:m},true);B.inflections=f;if(!q&&B.grid){B.drawGrid()}B.axisBBox=B.axis.getBBox();B.drawLabel()},drawGrid:function(){var s=this,n=s.chart.surface,b=s.grid,d=b.odd,e=b.even,g=s.inflections,h=g.length-((d||e)?0:1),t=s.position,c=s.chart.maxGutter,m=s.width-2,o,p,q=1,l=[],f,a,j,k=[],r=[];if((c[1]!==0&&(t=="left"||t=="right"))||(c[0]!==0&&(t=="top"||t=="bottom"))){q=0;h++}for(;q<h;q++){o=g[q];p=g[q-1];if(d||e){l=(q%2)?k:r;f=((q%2)?d:e)||{};a=(f.lineWidth||f["stroke-width"]||0)/2;j=2*a;if(t=="left"){l.push("M",p[0]+1+a,p[1]+0.5-a,"L",p[0]+1+m-a,p[1]+0.5-a,"L",o[0]+1+m-a,o[1]+0.5+a,"L",o[0]+1+a,o[1]+0.5+a,"Z")}else{if(t=="right"){l.push("M",p[0]-a,p[1]+0.5-a,"L",p[0]-m+a,p[1]+0.5-a,"L",o[0]-m+a,o[1]+0.5+a,"L",o[0]-a,o[1]+0.5+a,"Z")}else{if(t=="top"){l.push("M",p[0]+0.5+a,p[1]+1+a,"L",p[0]+0.5+a,p[1]+1+m-a,"L",o[0]+0.5-a,o[1]+1+m-a,"L",o[0]+0.5-a,o[1]+1+a,"Z")}else{l.push("M",p[0]+0.5+a,p[1]-a,"L",p[0]+0.5+a,p[1]-m+a,"L",o[0]+0.5-a,o[1]-m+a,"L",o[0]+0.5-a,o[1]-a,"Z")}}}}else{if(t=="left"){l=l.concat(["M",o[0]+0.5,o[1]+0.5,"l",m,0])}else{if(t=="right"){l=l.concat(["M",o[0]-0.5,o[1]+0.5,"l",-m,0])}else{if(t=="top"){l=l.concat(["M",o[0]+0.5,o[1]+0.5,"l",0,m])}else{l=l.concat(["M",o[0]+0.5,o[1]-0.5,"l",0,-m])}}}}}if(d||e){if(k.length){if(!s.gridOdd&&k.length){s.gridOdd=n.add({type:"path",path:k})}s.gridOdd.setAttributes(Ext.apply({path:k,hidden:false},d||{}),true)}if(r.length){if(!s.gridEven){s.gridEven=n.add({type:"path",path:r})}s.gridEven.setAttributes(Ext.apply({path:r,hidden:false},e||{}),true)}}else{if(l.length){if(!s.gridLines){s.gridLines=s.chart.surface.add({type:"path",path:l,"stroke-width":s.lineWidth||1,stroke:s.gridColor||"#ccc"})}s.gridLines.setAttributes({hidden:false,path:l},true)}else{if(s.gridLines){s.gridLines.hide(true)}}}},getOrCreateLabel:function(c,f){var d=this,b=d.labelGroup,e=b.getAt(c),a=d.chart.surface;if(e){if(f!=e.attr.text){e.setAttributes(Ext.apply({text:f},d.label),true);e._bbox=e.getBBox()}}else{e=a.add(Ext.apply({group:b,type:"text",x:0,y:0,text:f},d.label));a.renderItem(e);e._bbox=e.getBBox()}if(d.label.rotation){e.setAttributes({rotation:{degrees:0}},true);e._ubbox=e.getBBox();e.setAttributes(d.label,true)}else{e._ubbox=e._bbox}return e},rect2pointArray:function(k){var b=this.chart.surface,f=b.getBBox(k,true),l=[f.x,f.y],d=l.slice(),j=[f.x+f.width,f.y],a=j.slice(),i=[f.x+f.width,f.y+f.height],e=i.slice(),h=[f.x,f.y+f.height],c=h.slice(),g=k.matrix;l[0]=g.x.apply(g,d);l[1]=g.y.apply(g,d);j[0]=g.x.apply(g,a);j[1]=g.y.apply(g,a);i[0]=g.x.apply(g,e);i[1]=g.y.apply(g,e);h[0]=g.x.apply(g,c);h[1]=g.y.apply(g,c);return[l,j,i,h]},intersect:function(c,a){var d=this.rect2pointArray(c),b=this.rect2pointArray(a);return !!Ext.draw.Draw.intersect(d,b).length},drawHorizontalLabels:function(){var B=this,e=B.label,v=Math.floor,t=Math.max,u=B.chart.axes,f=B.chart.insetPadding,C=B.position,h=B.inflections,m=h.length,z=B.labels,q=0,g,c,r,n,b,A=B.adjustEnd,a=u.findIndex("position","left")!=-1,l=u.findIndex("position","right")!=-1,w,p,k,o,j,s,d;k=m-1;r=h[0];d=B.getOrCreateLabel(0,B.label.renderer(z[0]));g=Math.floor(Math.abs(Math.sin(e.rotate&&(e.rotate.degrees*Math.PI/180)||0)));for(s=0;s<m;s++){r=h[s];p=B.label.renderer(z[s]);w=B.getOrCreateLabel(s,p);c=w._bbox;q=t(q,c.height+B.dashSize+B.label.padding);o=v(r[0]-(g?c.height:c.width)/2);if(A&&B.chart.maxGutter[0]==0){if(s==0&&!a){o=r[0]}else{if(s==k&&!l){o=Math.min(o,r[0]-c.width+f)}}}if(C=="top"){j=r[1]-(B.dashSize*2)-B.label.padding-(c.height/2)}else{j=r[1]+(B.dashSize*2)+B.label.padding+(c.height/2)}w.setAttributes({hidden:false,x:o,y:j},true);if(s!=0&&(B.intersect(w,n)||B.intersect(w,d))){if(s===k&&b!==0){n.hide(true)}else{w.hide(true);continue}}n=w;b=s}return q},drawVerticalLabels:function(){var B=this,e=B.inflections,C=B.position,h=e.length,n=B.chart,d=n.insetPadding,A=B.labels,t=0,q=Math.max,s=Math.floor,c=Math.ceil,r=B.chart.axes,v=B.chart.maxGutter[1],b,o,j,a,m=r.findIndex("position","top")!=-1,u=r.findIndex("position","bottom")!=-1,z=B.adjustEnd,w,l,g=h-1,k,f,p;for(p=0;p<h;p++){o=e[p];l=B.label.renderer(A[p]);w=B.getOrCreateLabel(p,l);b=w._bbox;t=q(t,b.width+B.dashSize+B.label.padding);f=o[1];if(z&&v<b.height/2){if(p==g&&!m){f=Math.max(f,B.y-B.length+c(b.height/2)-d)}else{if(p==0&&!u){f=B.y+v-s(b.height/2)}}}if(C=="left"){k=o[0]-b.width-B.dashSize-B.label.padding-2}else{k=o[0]+B.dashSize+B.label.padding+2}w.setAttributes(Ext.apply({hidden:false,x:k,y:f},B.label),true);if(p!=0&&B.intersect(w,j)){if(p===g&&a!==0){j.hide(true)}else{w.hide(true);continue}}j=w;a=p}return t},drawLabel:function(){var g=this,a=g.position,b=g.labelGroup,h=g.inflections,f=0,e=0,d,c;if(a=="left"||a=="right"){f=g.drawVerticalLabels()}else{e=g.drawHorizontalLabels()}d=b.getCount();c=h.length;for(;c<d;c++){b.getAt(c).hide(true)}g.bbox={};Ext.apply(g.bbox,g.axisBBox);g.bbox.height=e;g.bbox.width=f;if(Ext.isString(g.title)){g.drawTitle(f,e)}},setTitle:function(a){this.title=a;this.drawLabel()},drawTitle:function(k,l){var g=this,f=g.position,b=g.chart.surface,c=g.displaySprite,j=g.title,e=(f=="left"||f=="right"),i=g.x,h=g.y,a,m,d;if(c){c.setAttributes({text:j},true)}else{a={type:"text",x:0,y:0,text:j};c=g.displaySprite=b.add(Ext.apply(a,g.axisTitleStyle,g.labelTitle));b.renderItem(c)}m=c.getBBox();d=g.dashSize+g.label.padding;if(e){h-=((g.length/2)-(m.height/2));if(f=="left"){i-=(k+d+(m.width/2))}else{i+=(k+d+m.width-(m.width/2))}g.bbox.width+=m.width+10}else{i+=(g.length/2)-(m.width*0.5);if(f=="top"){h-=(l+d+(m.height*0.3))}else{h+=(l+d+(m.height*0.8))}g.bbox.height+=m.height+10}c.setAttributes({translate:{x:i,y:h}},true)}});Ext.define("Ext.chart.axis.Category",{extend:"Ext.chart.axis.Axis",alternateClassName:"Ext.chart.CategoryAxis",alias:"axis.category",categoryNames:null,calculateCategoryCount:false,setLabels:function(){var c=this.chart.getChartStore(),h=c.data.items,j,f,b,a=this.fields,g=a.length,e;this.labels=[];for(j=0,f=h.length;j<f;j++){b=h[j];for(e=0;e<g;e++){this.labels.push(b.get(a[e]))}}},applyData:function(){this.callParent();this.setLabels();var a=this.chart.getChartStore().getCount();return{from:0,to:a-1,power:1,step:1,steps:a-1}}});Ext.define("Ext.chart.axis.Gauge",{extend:"Ext.chart.axis.Abstract",position:"gauge",alias:"axis.gauge",drawAxis:function(p){var h=this.chart,a=h.surface,o=h.chartBBox,d=o.x+(o.width/2),b=o.y+o.height,c=this.margin||10,l=Math.min(o.width,2*o.height)/2+c,g=[],m,k=this.steps,e,f=Math.PI,n=Math.cos,j=Math.sin;if(this.sprites&&!h.resizing){this.drawLabel();return}if(this.margin>=0){if(!this.sprites){for(e=0;e<=k;e++){m=a.add({type:"path",path:["M",d+(l-c)*n(e/k*f-f),b+(l-c)*j(e/k*f-f),"L",d+l*n(e/k*f-f),b+l*j(e/k*f-f),"Z"],stroke:"#ccc"});m.setAttributes({hidden:false},true);g.push(m)}}else{g=this.sprites;for(e=0;e<=k;e++){g[e].setAttributes({path:["M",d+(l-c)*n(e/k*f-f),b+(l-c)*j(e/k*f-f),"L",d+l*n(e/k*f-f),b+l*j(e/k*f-f),"Z"],stroke:"#ccc"},true)}}}this.sprites=g;this.drawLabel();if(this.title){this.drawTitle()}},drawTitle:function(){var e=this,d=e.chart,a=d.surface,f=d.chartBBox,c=e.titleSprite,b;if(!c){e.titleSprite=c=a.add({type:"text",zIndex:2})}c.setAttributes(Ext.apply({text:e.title},e.label||{}),true);b=c.getBBox();c.setAttributes({x:f.x+(f.width/2)-(b.width/2),y:f.y+f.height-(b.height/2)-4},true)},setTitle:function(a){this.title=a;this.drawTitle()},drawLabel:function(){var k=this.chart,o=k.surface,b=k.chartBBox,h=b.x+(b.width/2),g=b.y+b.height,l=this.margin||10,d=Math.min(b.width,2*b.height)/2+2*l,t=Math.round,m=[],f,r=this.maximum||0,j=this.minimum||0,q=this.steps,p=0,u,s=Math.PI,c=Math.cos,a=Math.sin,e=this.label,n=e.renderer||function(i){return i};if(!this.labelArray){for(p=0;p<=q;p++){u=(p===0||p===q)?7:0;f=o.add({type:"text",text:n(t(j+p/q*(r-j))),x:h+d*c(p/q*s-s),y:g+d*a(p/q*s-s)-u,"text-anchor":"middle","stroke-width":0.2,zIndex:10,stroke:"#333"});f.setAttributes({hidden:false},true);m.push(f)}}else{m=this.labelArray;for(p=0;p<=q;p++){u=(p===0||p===q)?7:0;m[p].setAttributes({text:n(t(j+p/q*(r-j))),x:h+d*c(p/q*s-s),y:g+d*a(p/q*s-s)-u},true)}}this.labelArray=m}});Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",alternateClassName:"Ext.chart.NumericAxis",type:"numeric",alias:"axis.numeric",uses:["Ext.data.Store"],constructor:function(c){var d=this,a=!!(c.label&&c.label.renderer),b;d.callParent([c]);b=d.label;if(c.constrain==null){d.constrain=(c.minimum!=null&&c.maximum!=null)}if(!a){b.renderer=function(e){return d.roundToDecimal(e,d.decimals)}}},roundToDecimal:function(a,c){var b=Math.pow(10,c||0);return Math.round(a*b)/b},minimum:NaN,maximum:NaN,constrain:true,decimals:2,scale:"linear",doConstrain:function(){var s=this,b=s.chart.store,g=b.data.items,r,t,a,e=s.chart.series.items,h=s.fields,c=h.length,f=s.calcEnds(),k=f.from,o=f.to,p,m,q=false,j,u=[],n;for(p=0,m=e.length;p<m;p++){if(e[p].type==="bar"&&e[p].stacked){return}}for(r=0,t=g.length;r<t;r++){n=true;a=g[r];for(p=0;p<c;p++){j=a.get(h[p]);if(+j<+k){n=false;break}if(+j>+o){n=false;break}}if(n){u.push(a)}}s.chart.substore=Ext.create("Ext.data.Store",{model:b.model});s.chart.substore.loadData(u)},position:"left",adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false,processView:function(){var a=this,b=a.constrain;if(b){a.doConstrain()}},applyData:function(){this.callParent();return this.calcEnds()}});Ext.define("Ext.chart.axis.Radial",{extend:"Ext.chart.axis.Abstract",position:"radial",alias:"axis.radial",drawAxis:function(t){var k=this.chart,a=k.surface,s=k.chartBBox,p=k.store,b=p.getCount(),e=s.x+(s.width/2),c=s.y+(s.height/2),o=Math.min(s.width,s.height)/2,h=[],q,n=this.steps,f,d,g=Math.PI*2,r=Math.cos,m=Math.sin;if(this.sprites&&!k.resizing){this.drawLabel();return}if(!this.sprites){for(f=1;f<=n;f++){q=a.add({type:"circle",x:e,y:c,radius:Math.max(o*f/n,0),stroke:"#ccc"});q.setAttributes({hidden:false},true);h.push(q)}for(f=0;f<b;f++){q=a.add({type:"path",path:["M",e,c,"L",e+o*r(f/b*g),c+o*m(f/b*g),"Z"],stroke:"#ccc"});q.setAttributes({hidden:false},true);h.push(q)}}else{h=this.sprites;for(f=0;f<n;f++){h[f].setAttributes({x:e,y:c,radius:Math.max(o*(f+1)/n,0),stroke:"#ccc"},true)}for(d=0;d<b;d++){h[f+d].setAttributes({path:["M",e,c,"L",e+o*r(d/b*g),c+o*m(d/b*g),"Z"],stroke:"#ccc"},true)}}this.sprites=h;this.drawLabel()},drawLabel:function(){var v=this.chart,c=v.series.items,q,A=v.surface,b=v.chartBBox,k=v.store,I=k.data.items,o,h,n=b.x+(b.width/2),m=b.y+(b.height/2),g=Math.min(b.width,b.height)/2,E=Math.max,H=Math.round,w=[],l,y=[],d,z=[],f,u=!this.maximum,G=this.maximum||0,F=this.steps,D=0,C,s,r,x=Math.PI*2,e=Math.cos,a=Math.sin,B=this.label.display,p=B!=="none",t=10;if(!p){return}for(D=0,o=c.length;D<o;D++){q=c[D];y.push(q.yField);f=q.xField}for(C=0,o=I.length;C<o;C++){h=I[C];if(u){for(D=0,d=y.length;D<d;D++){G=E(+h.get(y[D]),G)}}z.push(h.get(f))}if(!this.labelArray){if(B!="categories"){for(D=1;D<=F;D++){l=A.add({type:"text",text:H(D/F*G),x:n,y:m-g*D/F,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"});l.setAttributes({hidden:false},true);w.push(l)}}if(B!="scale"){for(C=0,F=z.length;C<F;C++){s=e(C/F*x)*(g+t);r=a(C/F*x)*(g+t);l=A.add({type:"text",text:z[C],x:n+s,y:m+r,"text-anchor":s*s<=0.001?"middle":(s<0?"end":"start")});l.setAttributes({hidden:false},true);w.push(l)}}}else{w=this.labelArray;if(B!="categories"){for(D=0;D<F;D++){w[D].setAttributes({text:H((D+1)/F*G),x:n,y:m-g*(D+1)/F,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"},true)}}if(B!="scale"){for(C=0,F=z.length;C<F;C++){s=e(C/F*x)*(g+t);r=a(C/F*x)*(g+t);if(w[D+C]){w[D+C].setAttributes({type:"text",text:z[C],x:n+s,y:m+r,"text-anchor":s*s<=0.001?"middle":(s<0?"end":"start")},true)}}}}this.labelArray=w}});Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Numeric",alternateClassName:"Ext.chart.TimeAxis",alias:"axis.time",uses:["Ext.data.Store"],dateFormat:false,fromDate:false,toDate:false,step:[Ext.Date.DAY,1],constrain:false,constructor:function(b){var c=this,a,d,e;c.callParent([b]);a=c.label||{};e=this.dateFormat;if(e){if(a.renderer){d=a.renderer;a.renderer=function(f){f=d(f);return Ext.Date.format(new Date(d(f)),e)}}else{a.renderer=function(f){return Ext.Date.format(new Date(f>>0),e)}}}},processView:function(){var a=this;if(a.fromDate){a.minimum=+a.fromDate}if(a.toDate){a.maximum=+a.toDate}if(a.constrain){a.doConstrain()}},calcEnds:function(){var c=this,a,b=c.step;if(b){a=c.getRange();a=Ext.draw.Draw.snapEndsByDateAndStep(new Date(a.min),new Date(a.max),Ext.isNumber(b)?[Date.MILLI,b]:b);if(c.minimum){a.from=c.minimum}if(c.maximum){a.to=c.maximum}a.step=(a.to-a.from)/a.steps;return a}else{return c.callParent(arguments)}}});Ext.define("Ext.chart.Tip",{requires:["Ext.tip.ToolTip","Ext.chart.TipSurface"],constructor:function(b){var c=this,a,d,e;if(b.tips){c.tipTimeout=null;c.tipConfig=Ext.apply({},b.tips,{renderer:Ext.emptyFn,constrainPosition:true,autoHide:true});c.tooltip=new Ext.tip.ToolTip(c.tipConfig);c.chart.surface.on("mousemove",c.tooltip.onMouseMove,c.tooltip);c.chart.surface.on("mouseleave",function(){c.hideTip()});if(c.tipConfig.surface){a=c.tipConfig.surface;d=a.sprites;e=new Ext.chart.TipSurface({id:"tipSurfaceComponent",sprites:d});if(a.width&&a.height){e.setSize(a.width,a.height)}c.tooltip.add(e);c.spriteTip=e}}},showTip:function(k){var e=this,l,a,c,d,j,b,i,g,h,f;if(!e.tooltip){return}clearTimeout(e.tipTimeout);l=e.tooltip;a=e.spriteTip;c=e.tipConfig;d=l.trackMouse;if(!d){l.trackMouse=true;j=k.sprite;b=j.surface;i=Ext.get(b.getId());if(i){g=i.getXY();h=g[0]+(j.attr.x||0)+(j.attr.translation&&j.attr.translation.x||0);f=g[1]+(j.attr.y||0)+(j.attr.translation&&j.attr.translation.y||0);l.targetXY=[h,f]}}if(a){c.renderer.call(l,k.storeItem,k,a.surface)}else{c.renderer.call(l,k.storeItem,k)}l.show();l.trackMouse=d},hideTip:function(a){var b=this.tooltip;if(!b){return}clearTimeout(this.tipTimeout);this.tipTimeout=setTimeout(function(){b.hide()},0)}});Ext.define("Ext.chart.series.Series",{mixins:{observable:"Ext.util.Observable",labels:"Ext.chart.Label",highlights:"Ext.chart.Highlight",tips:"Ext.chart.Tip",callouts:"Ext.chart.Callout"},type:null,title:null,showInLegend:true,renderer:function(e,a,c,d,b){return c},shadowAttributes:null,animating:false,constructor:function(a){var b=this;if(a){Ext.apply(b,a)}b.shadowGroups=[];b.mixins.labels.constructor.call(b,a);b.mixins.highlights.constructor.call(b,a);b.mixins.tips.constructor.call(b,a);b.mixins.callouts.constructor.call(b,a);b.addEvents({scope:b,itemmouseover:true,itemmouseout:true,itemmousedown:true,itemmouseup:true,mouseleave:true,afterdraw:true,titlechange:true});b.mixins.observable.constructor.call(b,a);b.on({scope:b,itemmouseover:b.onItemMouseOver,itemmouseout:b.onItemMouseOut,mouseleave:b.onMouseLeave});if(b.style){Ext.apply(b.seriesStyle,b.style)}},eachRecord:function(c,b){var a=this.chart;(a.substore||a.store).each(c,b)},getRecordCount:function(){var b=this.chart,a=b.substore||b.store;return a?a.getCount():0},isExcluded:function(a){var b=this.__excludes;return !!(b&&b[a])},setBBox:function(a){var e=this,c=e.chart,b=c.chartBBox,f=a?0:c.maxGutter[0],d=a?0:c.maxGutter[1],g,h;g={x:b.x,y:b.y,width:b.width,height:b.height};e.clipBox=g;h={x:(g.x+f)-(c.zoom.x*c.zoom.width),y:(g.y+d)-(c.zoom.y*c.zoom.height),width:(g.width-(f*2))*c.zoom.width,height:(g.height-(d*2))*c.zoom.height};e.bbox=h},onAnimate:function(b,a){var c=this;b.stopAnimation();if(c.animating){return b.animate(Ext.applyIf(a,c.chart.animate))}else{c.animating=true;return b.animate(Ext.apply(Ext.applyIf(a,c.chart.animate),{listeners:{afteranimate:function(){c.animating=false;c.fireEvent("afterrender")}}}))}},getGutters:function(){return[0,0]},onItemMouseOver:function(b){var a=this;if(b.series===a){if(a.highlight){a.highlightItem(b)}if(a.tooltip){a.showTip(b)}}},onItemMouseOut:function(b){var a=this;if(b.series===a){a.unHighlightItem();if(a.tooltip){a.hideTip(b)}}},onMouseLeave:function(){var a=this;a.unHighlightItem();if(a.tooltip){a.hideTip()}},getItemForPoint:function(a,h){if(!this.items||!this.items.length||this.seriesIsHidden){return null}var f=this,b=f.items,g=f.bbox,e,c,d;if(!Ext.draw.Draw.withinBox(a,h,g)){return null}for(c=0,d=b.length;c<d;c++){if(b[c]&&this.isItemInPoint(a,h,b[c],c)){return b[c]}}return null},isItemInPoint:function(a,d,c,b){return false},hideAll:function(){var g=this,f=g.items,k,e,d,c,a,h,b;g.seriesIsHidden=true;g._prevShowMarkers=g.showMarkers;g.showMarkers=false;g.hideLabels(0);for(d=0,e=f.length;d<e;d++){k=f[d];h=k.sprite;if(h){h.setAttributes({hidden:true},true)}if(h&&h.shadows){b=h.shadows;for(c=0,a=b.length;c<a;++c){b[c].setAttributes({hidden:true},true)}}}},showAll:function(){var a=this,b=a.chart.animate;a.chart.animate=false;a.seriesIsHidden=false;a.showMarkers=a._prevShowMarkers;a.drawSeries();a.chart.animate=b},hide:function(){if(this.items){var g=this,b=g.items,d,c,a,f,e;if(b&&b.length){for(d=0,f=b.length;d<f;++d){if(b[d].sprite){b[d].sprite.hide(true);e=b[d].shadows||b[d].sprite.shadows;if(e){for(c=0,a=e.length;c<a;++c){e[c].hide(true)}}}}g.hideLabels()}}},getLegendColor:function(a){var b=this,d,c;if(b.seriesStyle){d=b.seriesStyle.fill;c=b.seriesStyle.stroke;if(d&&d!="none"){return d}if(c){return c}}return(b.colorArrayStyle)?b.colorArrayStyle[b.seriesIdx%b.colorArrayStyle.length]:"#000"},visibleInLegend:function(a){var b=this.__excludes;if(b){return !b[a]}return !this.seriesIsHidden},setTitle:function(a,d){var c=this,b=c.title;if(Ext.isString(a)){d=a;a=0}if(Ext.isArray(b)){b[a]=d}else{c.title=d}c.fireEvent("titlechange",d,a)}});Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",alternateClassName:["Ext.chart.CartesianSeries","Ext.chart.CartesianChart"],xField:null,yField:null,axis:"left",getLegendLabels:function(){var h=this,e=[],f,d,g,j=h.combinations,k,a,c,b;f=[].concat(h.yField);for(d=0,g=f.length;d<g;d++){k=h.title;e.push((Ext.isArray(k)?k[d]:k)||f[d])}if(j){j=Ext.Array.from(j);for(d=0,g=j.length;d<g;d++){a=j[d];c=e[a[0]];b=e[a[1]];e[a[1]]=c+" & "+b;e.splice(a[0],1)}}return e},eachYValue:function(b,e,d){var h=this,g=h.getYValueAccessors(),c,f,a;for(c=0,f=g.length;c<f;c++){a=g[c];e.call(d,a(b),c)}},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(f,e){var d=this,c=d.getYValueAccessors(),b=c[f],a=c[e];c[e]=function(g){return b(g)+a(g)};c.splice(f,1);d.callParent([f,e])},clearCombinations:function(){delete this.yValueAccessors;this.callParent()},getYValueAccessors:function(){var e=this,a=e.yValueAccessors,f,c,b,d;if(!a){a=e.yValueAccessors=[];f=[].concat(e.yField);for(b=0,d=f.length;b<d;b++){c=f[b];a.push(function(g){return g.get(c)})}}return a},getMinMaxXValues:function(){var j=this,h=j.chart,l=h.getChartStore(),d=l.data.items,e,g,f,c,k,a=j.xField,b;if(j.getRecordCount()>0){c=Infinity;k=-c;for(e=0,g=d.length;e<g;e++){f=d[e];b=f.get(a);if(b>k){k=b}if(b<c){c=b}}}else{c=k=0}return[c,k]},getMinMaxYValues:function(){var j=this,h=j.chart,n=h.getChartStore(),c=n.data.items,d,g,e,f=j.stacked,b,k,m,l;function a(q,p){if(!j.isExcluded(p)){if(q<0){l+=q}else{m+=q}}}function o(q,p){if(!j.isExcluded(p)){if(q>k){k=q}if(q<b){b=q}}}if(j.getRecordCount()>0){b=Infinity;k=-b;for(d=0,g=c.length;d<g;d++){e=c[d];if(f){m=0;l=0;j.eachYValue(e,a);if(m>k){k=m}if(l<b){b=l}}else{j.eachYValue(e,o)}}}else{b=k=0}return[b,k]},getAxesForXAndYFields:function(){var l=this,k=l.chart.axes,d=[].concat(l.axis),c={},e=[].concat(l.yField),m={},n=[].concat(l.xField),h,b,a,g,j,f;f=l.type==="bar"&&l.column===false;if(f){h=e;e=n;n=h}if(Ext.Array.indexOf(d,"top")>-1){b="top"}else{if(Ext.Array.indexOf(d,"bottom")>-1){b="bottom"}else{if(k.get("top")&&k.get("bottom")){for(g=0,j=n.length;g<j;g++){m[n[g]]=true}h=[].concat(k.get("bottom").fields);for(g=0,j=h.length;g<j;g++){if(m[h[g]]){b="bottom";break}}h=[].concat(k.get("top").fields);for(g=0,j=h.length;g<j;g++){if(m[h[g]]){b="top";break}}}else{if(k.get("top")){b="top"}else{if(k.get("bottom")){b="bottom"}}}}}if(Ext.Array.indexOf(d,"left")>-1){a="left"}else{if(Ext.Array.indexOf(d,"right")>-1){a="right"}else{if(k.get("left")&&k.get("right")){for(g=0,j=e.length;g<j;g++){c[e[g]]=true}h=[].concat(k.get("right").fields);for(g=0,j=h.length;g<j;g++){if(c[h[g]]){break}}h=[].concat(k.get("left").fields);for(g=0,j=h.length;g<j;g++){if(c[h[g]]){a="left";break}}}else{if(k.get("left")){a="left"}else{if(k.get("right")){a="right"}}}}}return f?{xAxis:a,yAxis:b}:{xAxis:b,yAxis:a}}});Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",alias:"series.area",requires:["Ext.chart.axis.Axis","Ext.draw.Color","Ext.fx.Anim"],type:"area",stacked:true,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;c.highlightCfg=Ext.Object.merge({},{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},c.highlightCfg);Ext.apply(e,c,{__excludes:[]});if(e.highlight){e.highlightSprite=a.add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}e.group=a.getGroup(e.seriesId)},shrink:function(b,m,n){var h=b.length,l=Math.floor(h/n),g,f,d=0,k=this.areas.length,a=[],e=[],c=[];for(f=0;f<k;++f){a[f]=0}for(g=0;g<h;++g){d+=+b[g];for(f=0;f<k;++f){a[f]+=+m[g][f]}if(g%l==0){e.push(d/l);for(f=0;f<k;++f){a[f]/=l}c.push(a);d=0;for(f=0,a=[];f<k;++f){a[f]=0}}}return{x:e,y:c}},getBounds:function(){var h=this,L=h.chart,a=L.getChartStore(),K=a.data.items,H,E,w,u=[].concat(h.yField),z=u.length,y=[],C=[],f=Infinity,B=f,A=f,m=-f,k=-f,r=Math,v=r.min,e=r.max,o=h.getAxesForXAndYFields(),I=o.xAxis,t=o.yAxis,F,q,j,g,D,p,M,J,b,s,G,c,d,n,x;h.setBBox();j=h.bbox;if(n=L.axes.get(I)){if(n.type==="Time"){q=true}F=n.applyData();B=F.from;m=F.to}if(n=L.axes.get(t)){F=n.applyData();A=F.from;k=F.to}if(h.xField&&!Ext.isNumber(B)){n=h.getMinMaxXValues();q=true;B=n[0];m=n[1]}if(h.yField&&!Ext.isNumber(A)){n=h.getMinMaxYValues();A=n[0];k=n[1]}if(!Ext.isNumber(A)){A=0}if(!Ext.isNumber(k)){k=0}for(H=0,E=K.length;H<E;H++){w=K[H];p=w.get(h.xField);M=[];if(typeof p!="number"){if(q){p=+p}else{p=H}}y.push(p);b=0;for(J=0;J<z;J++){if(h.__excludes[J]){continue}d=w.get(u[J]);if(typeof d=="number"){M.push(d)}}C.push(M)}g=j.width/((m-B)||1);D=j.height/((k-A)||1);s=y.length;if((s>j.width)&&h.areas){G=h.shrink(y,C,j.width);y=G.x;C=G.y}return{bbox:j,minX:B,minY:A,xValues:y,yValues:C,xScale:g,yScale:D,areasLen:z}},getPaths:function(){var v=this,l=v.chart,c=l.getChartStore(),e=true,f=v.getBounds(),a=f.bbox,m=v.items=[],u=[],b,d=0,o=[],r,h,j,g,p,s,k,w,q,t,n;h=f.xValues.length;for(r=0;r<h;r++){p=f.xValues[r];s=f.yValues[r];j=a.x+(p-f.minX)*f.xScale;k=0;d=0;for(w=0;w<f.areasLen;w++){if(v.__excludes[w]){continue}if(!u[w]){u[w]=[]}t=s[d];k+=t;g=a.y+a.height-(k-f.minY)*f.yScale;if(!o[w]){o[w]=["M",j,g];u[w].push(["L",j,g])}else{o[w].push("L",j,g);u[w].push(["L",j,g])}if(!m[w]){m[w]={pointsUp:[],pointsDown:[],series:v}}m[w].pointsUp.push([j,g]);d++}}for(w=0;w<f.areasLen;w++){if(v.__excludes[w]){continue}n=o[w];if(w==0||e){e=false;n.push("L",j,a.y+a.height,"L",a.x,a.y+a.height,"Z")}else{b=u[q];b.reverse();n.push("L",j,b[0][2]);for(r=0;r<h;r++){n.push(b[r][0],b[r][1],b[r][2]);m[w].pointsDown[h-r-1]=[b[r][1],b[r][2]]}n.push("L",a.x,n[2],"Z")}q=w}return{paths:o,areasLen:f.areasLen}},drawSeries:function(){var g=this,f=g.chart,h=f.getChartStore(),c=f.surface,b=f.animate,j=g.group,a=Ext.apply(g.seriesStyle,g.style),k=g.colorArrayStyle,n=k&&k.length||0,d,e,m,l,i;g.unHighlightItem();g.cleanHighlights();if(!h||!h.getCount()||g.seriesIsHidden){g.hide();g.items=[];return}m=g.getPaths();if(!g.areas){g.areas=[]}for(d=0;d<m.areasLen;d++){if(g.__excludes[d]){continue}if(!g.areas[d]){g.items[d].sprite=g.areas[d]=c.add(Ext.apply({},{type:"path",group:j,path:m.paths[d],stroke:a.stroke||k[d%n],fill:k[d%n]},a||{}))}e=g.areas[d];l=m.paths[d];if(b){i=g.renderer(e,false,{path:l,fill:k[d%n],stroke:a.stroke||k[d%n]},d,h);g.animation=g.onAnimate(e,{to:i})}else{i=g.renderer(e,false,{path:l,hidden:false,fill:k[d%n],stroke:a.stroke||k[d%n]},d,h);g.areas[d].setAttributes(i,true)}}g.renderLabels();g.renderCallouts()},onAnimate:function(b,a){b.show();return this.callParent(arguments)},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,h=f.bbox,b=Ext.apply(a,f.seriesLabelStyle);return f.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:g,x:j.point[0],y:h.y+h.height/2},b||{}))},onPlaceLabel:function(f,j,r,o,n,c,e){var t=this,k=t.chart,q=k.resizing,s=t.label,p=s.renderer,b=s.field,a=t.bbox,h=r.point[0],g=r.point[1],d,m,l;f.setAttributes({text:p(j.get(b[e])),hidden:true},true);d=f.getBBox();m=d.width/2;l=d.height/2;h=h-m<a.x?a.x+m:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=g-l<a.y?a.y+l:g;g=(g+l>a.y+a.height)?(g-(g+l-a.y-a.height)):g;if(t.chart.animate&&!t.chart.resizing){f.show(true);t.onAnimate(f,{to:{x:h,y:g}})}else{f.setAttributes({x:h,y:g},true);if(q){t.animation.on("afteranimate",function(){f.show(true)})}else{f.show(true)}}},onPlaceCallout:function(l,q,I,F,E,d,j){var L=this,r=L.chart,C=r.surface,G=r.resizing,K=L.callouts,s=L.items,u=(F==0)?false:s[F-1].point,w=(F==s.length-1)?false:s[F+1].point,c=I.point,z,f,M,J,n,o,b=l.label.getBBox(),H=30,B=10,A=3,g,e,h,v,t,D=L.clipRect,m,k;if(!u){u=c}if(!w){w=c}J=(w[1]-u[1])/(w[0]-u[0]);n=(c[1]-u[1])/(c[0]-u[0]);o=(w[1]-c[1])/(w[0]-c[0]);f=Math.sqrt(1+J*J);z=[1/f,J/f];M=[-z[1],z[0]];if(n>0&&o<0&&M[1]<0||n<0&&o>0&&M[1]>0){M[0]*=-1;M[1]*=-1}else{if(Math.abs(n)<Math.abs(o)&&M[0]<0||Math.abs(n)>Math.abs(o)&&M[0]>0){M[0]*=-1;M[1]*=-1}}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;if(g<D[0]||(g+h)>(D[0]+D[2])){M[0]*=-1}if(e<D[1]||(e+v)>(D[1]+D[3])){M[1]*=-1}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;l.lines.setAttributes({path:["M",c[0],c[1],"L",m,k,"Z"]},true);l.box.setAttributes({x:g,y:e,width:h,height:v},true);l.label.setAttributes({x:m+(M[0]>0?A:-(b.width+A)),y:k},true);for(t in l){l[t].show(true)}},isItemInPoint:function(h,g,l,c){var f=this,b=l.pointsUp,d=l.pointsDown,o=Math.abs,n=false,k=false,e=Infinity,a,m,j;for(a=0,m=b.length;a<m;a++){j=[b[a][0],b[a][1]];n=false;k=a==m-1;if(e>o(h-j[0])){e=o(h-j[0]);n=true;if(k){++a}}if(!n||(n&&k)){j=b[a-1];if(g>=j[1]&&(!d.length||g<=(d[a-1][1]))){l.storeIndex=a-1;l.storeField=f.yField[c];l.storeItem=f.chart.store.getAt(a-1);l._points=d.length?[j,d[a-1]]:[j];return true}else{break}}}return false},highlightSeries:function(){var a,c,b;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}a.__highlighted=true;a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1;a.__prevFill=a.__prevFill||a.attr.fill;a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth;b=Ext.draw.Color.fromString(a.__prevFill);c={lineWidth:(a.__prevLineWidth||0)+2};if(b){c.fill=b.getLighter(0.2).toString()}else{c.opacity=Math.max(a.__prevOpacity-0.3,0)}if(this.chart.animate){a.__highlightAnim=new Ext.fx.Anim(Ext.apply({target:a,to:c},this.chart.animate))}else{a.setAttributes(c,true)}}},unHighlightSeries:function(){var a;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}if(a.__highlighted){a.__highlighted=false;a.__highlightAnim=new Ext.fx.Anim({target:a,to:{fill:a.__prevFill,opacity:a.__prevOpacity,lineWidth:a.__prevLineWidth}})}}},highlightItem:function(c){var b=this,a,d;if(!c){this.highlightSeries();return}a=c._points;d=a.length==2?["M",a[0][0],a[0][1],"L",a[1][0],a[1][1]]:["M",a[0][0],a[0][1],"L",a[0][0],b.bbox.y+b.bbox.height];b.highlightSprite.setAttributes({path:d,hidden:false},true)},unHighlightItem:function(a){if(!a){this.unHighlightSeries()}if(this.highlightSprite){this.highlightSprite.hide(true)}},hideAll:function(a){var b=this;a=(isNaN(b._index)?a:b._index)||0;b.__excludes[a]=true;b.areas[a].hide(true);b.redraw()},showAll:function(a){var b=this;a=(isNaN(b._index)?a:b._index)||0;b.__excludes[a]=false;b.areas[a].show(true);b.redraw()},redraw:function(){var a=this,b;b=a.chart.legend.rebuild;a.chart.legend.rebuild=false;a.chart.redraw();a.chart.legend.rebuild=b},hide:function(){if(this.areas){var g=this,b=g.areas,d,c,a,f,e;if(b&&b.length){for(d=0,f=b.length;d<f;++d){if(b[d]){b[d].hide(true)}}g.hideLabels()}}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.BarSeries","Ext.chart.BarChart","Ext.chart.StackedBarChart"],requires:["Ext.chart.axis.Axis","Ext.fx.Anim"],type:"bar",alias:"series.bar",column:false,style:{},gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,f=e.chart.shadow,d,b;c.highlightCfg=Ext.Object.merge({lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},c.highlightCfg);Ext.apply(e,c,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:0.9}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:0.6}}]});e.group=a.getGroup(e.seriesId+"-bars");if(f){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},getBarGirth:function(){var d=this,a=d.chart.getChartStore(),b=d.column,c=a.getCount(),e=d.gutter/100;return(d.chart.chartBBox[b?"width":"height"]-d[b?"xPadding":"yPadding"]*2)/(c*(e+1)-e)},getGutters:function(){var b=this,a=b.column,c=Math.ceil(b[a?"xPadding":"yPadding"]+b.getBarGirth()/2);return b.column?[c,0]:[0,c]},getBounds:function(){var n=this,N=n.chart,b=N.getChartStore(),M=b.data.items,L,w,C,u=[].concat(n.yField),o=u.length,k=o,c=n.groupGutter/100,G=n.column,g=n.xPadding,l=n.yPadding,I=n.stacked,s=n.getBarGirth(),x=G?"width":"height",t=Math,A=t.min,h=t.max,m=t.abs,F=n.getAxesForXAndYFields(),z=F.yAxis,K,B,e,p,E,q,r,D,y,a,v,H,J,d,f;n.setBBox(true);p=n.bbox;if(n.__excludes){for(J=0,v=n.__excludes.length;J<v;J++){if(n.__excludes[J]){k--}}}r=N.axes.get(z);if(r){K=r.applyData();E=K.from;q=K.to}if(n.yField&&!Ext.isNumber(E)){D=n.getMinMaxYValues();E=D[0];q=D[1]}if(!Ext.isNumber(E)){E=0}if(!Ext.isNumber(q)){q=0}y=(G?p.height-l*2:p.width-g*2)/(q-E);B=s;e=(s/((I?1:k)*(c+1)-c));if(x in n.style){e=A(e,n.style[x]);B=e*((I?1:k)*(c+1)-c)}a=(G)?p.y+p.height-l:p.x+g;if(I){v=[[],[]];for(L=0,w=M.length;L<w;L++){C=M[L];v[0][L]=v[0][L]||0;v[1][L]=v[1][L]||0;for(J=0;J<o;J++){if(n.__excludes&&n.__excludes[J]){continue}H=C.get(u[J]);v[+(H>0)][L]+=m(H)}}v[+(q>0)].push(m(q));v[+(E>0)].push(m(E));f=h.apply(t,v[0]);d=h.apply(t,v[1]);y=(G?p.height-l*2:p.width-g*2)/(d+f);a=a+f*y*(G?-1:1)}else{if(E/q<0){a=a-E*y*(G?-1:1)}}return{bars:u,bbox:p,shrunkBarWidth:B,barsLen:o,groupBarsLen:k,barWidth:s,groupBarWidth:e,scale:y,zero:a,xPadding:g,yPadding:l,signed:E/q<0,minY:E,maxY:q}},getPaths:function(){var u=this,W=u.chart,b=W.getChartStore(),V=b.data.items,U,D,K,F=u.bounds=u.getBounds(),y=u.items=[],O=u.yField,k=u.gutter/100,c=u.groupGutter/100,S=W.animate,M=u.column,w=u.group,l=W.shadow,Q=u.shadowGroups,P=u.shadowAttributes,p=Q.length,x=F.bbox,A=F.barWidth,J=F.shrunkBarWidth,m=u.xPadding,q=u.yPadding,R=u.stacked,v=F.barsLen,N=u.colorArrayStyle,g=N&&N.length||0,B=Math,n=B.max,H=B.min,t=B.abs,T,X,e,I,C,a,h,s,r,o,f,d,E,z,L,G;for(U=0,D=V.length;U<D;U++){K=V[U];a=F.zero;h=F.zero;I=0;C=0;s=false;for(T=0,f=0;T<v;T++){if(u.__excludes&&u.__excludes[T]){continue}X=K.get(F.bars[T]);e=Math.round((X-n(F.minY,0))*F.scale);r={fill:N[(v>1?T:0)%g]};if(M){Ext.apply(r,{height:e,width:n(F.groupBarWidth,0),x:(x.x+m+(A-J)*0.5+U*A*(1+k)+f*F.groupBarWidth*(1+c)*!R),y:a-e})}else{L=(D-1)-U;Ext.apply(r,{height:n(F.groupBarWidth,0),width:e+(a==F.zero),x:a+(a!=F.zero),y:(x.y+q+(A-J)*0.5+L*A*(1+k)+f*F.groupBarWidth*(1+c)*!R+1)})}if(e<0){if(M){r.y=h;r.height=t(e)}else{r.x=h+e;r.width=t(e)}}if(R){if(e<0){h+=e*(M?-1:1)}else{a+=e*(M?-1:1)}I+=t(e);if(e<0){C+=t(e)}}r.x=Math.floor(r.x)+1;G=Math.floor(r.y);if(!Ext.isIE9&&r.y>G){G--}r.y=G;r.width=Math.floor(r.width);r.height=Math.floor(r.height);y.push({series:u,yField:O[T],storeItem:K,value:[K.get(u.xField),X],attr:r,point:M?[r.x+r.width/2,X>=0?r.y:r.y+r.height]:[X>=0?r.x+r.width:r.x,r.y+r.height/2]});if(S&&W.resizing){o=M?{x:r.x,y:F.zero,width:r.width,height:0}:{x:F.zero,y:r.y,width:0,height:r.height};if(l&&(R&&!s||!R)){s=true;for(d=0;d<p;d++){E=Q[d].getAt(R?U:(U*v+T));if(E){E.setAttributes(o,true)}}}z=w.getAt(U*v+T);if(z){z.setAttributes(o,true)}}f++}if(R&&y.length){y[U*f].totalDim=I;y[U*f].totalNegDim=C}}if(R&&f==0){for(U=0,D=V.length;U<D;U++){for(d=0;d<p;d++){E=Q[d].getAt(U);if(E){E.hide(true)}}}}},renderShadows:function(t,u,x,k){var y=this,o=y.chart,r=o.surface,f=o.animate,w=y.stacked,a=y.shadowGroups,v=y.shadowAttributes,n=a.length,g=o.getChartStore(),d=y.column,q=y.items,b=[],l=k.zero,e,p,h,z,m,s,c;if((w&&(t%k.groupBarsLen===0))||!w){s=t/k.groupBarsLen;for(e=0;e<n;e++){p=Ext.apply({},v[e]);h=a[e].getAt(w?s:t);Ext.copyTo(p,u,"x,y,width,height");if(!h){h=r.add(Ext.apply({type:"rect",group:a[e]},Ext.apply({},x,p)))}if(w){z=q[t].totalDim;m=q[t].totalNegDim;if(d){p.y=l+m-z-1;p.height=z}else{p.x=l-m;p.width=z}}c=y.renderer(h,g.getAt(s),p,t,g);c.hidden=!!u.hidden;if(f){y.onAnimate(h,{to:c})}else{h.setAttributes(c,true)}b.push(h)}}return b},drawSeries:function(){var B=this,q=B.chart,l=q.getChartStore(),u=q.surface,h=q.animate,z=B.stacked,d=B.column,b=q.shadow,a=B.shadowGroups,p=a.length,n=B.group,f=B.seriesStyle,r,o,x,w,A,s,c,e,g,m,k,y,t,v;if(!l||!l.getCount()||B.seriesIsHidden){B.hide();B.items=[];return}k=Ext.apply({},this.style,f);delete k.fill;delete k.x;delete k.y;delete k.width;delete k.height;B.unHighlightItem();B.cleanHighlights();B.getPaths();m=B.bounds;r=B.items;A=d?{y:m.zero,height:0}:{x:m.zero,width:0};o=r.length;for(x=0;x<o;x++){s=n.getAt(x);y=r[x].attr;if(b){r[x].shadows=B.renderShadows(x,y,A,m)}if(!s){t=Ext.apply({},A,y);t=Ext.apply(t,k||{});s=u.add(Ext.apply({},{type:"rect",group:n},t))}if(h){c=B.renderer(s,l.getAt(x),y,x,l);s._to=c;v=B.onAnimate(s,{to:Ext.apply(c,k)});if(b&&z&&(x%m.barsLen===0)){w=x/m.barsLen;for(e=0;e<p;e++){v.on("afteranimate",function(){this.show(true)},a[e].getAt(w))}}}else{c=B.renderer(s,l.getAt(x),Ext.apply(y,{hidden:false}),x,l);s.setAttributes(Ext.apply(c,k),true)}r[x].sprite=s}o=n.getCount();for(w=x;w<o;w++){n.getAt(w).hide(true)}if(B.stacked){x=l.getCount()}if(b){for(e=0;e<p;e++){g=a[e];o=g.getCount();for(w=x;w<o;w++){g.getAt(w).hide(true)}}}B.renderLabels()},onCreateLabel:function(e,k,d,f){var g=this,a=g.chart.surface,j=g.labelsGroup,b=g.label,c=Ext.apply({},b,g.seriesLabelStyle||{}),h;return a.add(Ext.apply({type:"text",group:j},c||{}))},onPlaceLabel:function(F,M,r,I,o,G,H,u){var l=this,m=l.bounds,d=m.groupBarWidth,E=l.column,K=l.chart,t=K.chartBBox,z=K.resizing,n=r.value[0],N=r.value[1],k=r.attr,w=l.label,J=w.orientation=="vertical",g=[].concat(w.field),s=w.renderer,q=s(M.get(g[u])),f=l.getLabelSize(q),a=f.width,c=f.height,b=m.zero,h="outside",p="insideStart",L="insideEnd",D=10,B=6,e=m.signed,C,A,v;F.setAttributes({text:q});F.isOutside=false;if(E){if(o==h){if(c+B+k.height>(N>=0?b-t.y:t.y+t.height-b)){o=L}}else{if(c+B>k.height){o=h;F.isOutside=true}}C=k.x+d/2;A=o==p?(b+((c/2+3)*(N>=0?-1:1))):(N>=0?(k.y+((c/2+3)*(o==h?-1:1))):(k.y+k.height+((c/2+3)*(o===h?1:-1))))}else{if(o==h){if(a+D+k.width>(N>=0?t.x+t.width-b:b-t.x)){o=L}}else{if(a+D>k.width){o=h;F.isOutside=true}}C=o==p?(b+((a/2+5)*(N>=0?1:-1))):(N>=0?(k.x+k.width+((a/2+5)*(o===h?1:-1))):(k.x+((a/2+5)*(o===h?-1:1))));A=k.y+d/2}v={x:C,y:A};if(J){v.rotate={x:C,y:A,degrees:270}}if(G&&z){if(E){C=k.x+k.width/2;A=b}else{C=b;A=k.y+k.height/2}F.setAttributes({x:C,y:A},true);if(J){F.setAttributes({rotate:{x:C,y:A,degrees:270}},true)}}if(G){l.onAnimate(F,{to:v})}else{F.setAttributes(Ext.apply(v,{hidden:false}),true)}},getLabelSize:function(f){var j=this.testerLabel,a=this.label,d=Ext.apply({},a,this.seriesLabelStyle||{}),b=a.orientation==="vertical",i,g,e,c;if(!j){j=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},d))}j.setAttributes({text:f},true);i=j.getBBox();g=i.width;e=i.height;return{width:b?e:g,height:b?g:e}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(a,d,b){var c=b.sprite.getBBox();return c.x<=a&&c.y<=d&&(c.x+c.width)>=a&&(c.y+c.height)>=d},hideAll:function(a){var e=this.chart.axes,c=e.items,d=c.length,b=0;a=(isNaN(this._index)?a:this._index)||0;if(!this.__excludes){this.__excludes=[]}this.__excludes[a]=true;this.drawSeries();for(b;b<d;b++){c[b].drawAxis()}},showAll:function(a){var e=this.chart.axes,c=e.items,d=c.length,b=0;a=(isNaN(this._index)?a:this._index)||0;if(!this.__excludes){this.__excludes=[]}this.__excludes[a]=false;this.drawSeries();for(b;b<d;b++){c[b].drawAxis()}},getLegendColor:function(a){var c=this,b=c.colorArrayStyle.length;if(c.style&&c.style.fill){return c.style.fill}else{return c.colorArrayStyle[a%b]}},highlightItem:function(a){this.callParent(arguments);this.renderLabels()},unHighlightItem:function(){this.callParent(arguments);this.renderLabels()},cleanHighlights:function(){this.callParent(arguments);this.renderLabels()}});Ext.define("Ext.chart.series.Column",{alternateClassName:["Ext.chart.ColumnSeries","Ext.chart.ColumnChart","Ext.chart.StackedColumnChart"],extend:"Ext.chart.series.Bar",type:"column",alias:"series.column",column:true,xPadding:10,yPadding:0});Ext.define("Ext.chart.series.Gauge",{extend:"Ext.chart.series.Series",type:"gauge",alias:"series.gauge",rad:Math.PI/180,highlightDuration:150,angleField:false,needle:false,donut:false,showInLegend:false,style:{},constructor:function(b){this.callParent(arguments);var g=this,f=g.chart,a=f.surface,h=f.store,j=f.shadow,d,c,e;Ext.apply(g,b,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});g.group=a.getGroup(g.seriesId);if(j){for(d=0,c=g.shadowAttributes.length;d<c;d++){g.shadowGroups.push(a.getGroup(g.seriesId+"-shadows"+d))}}a.customAttributes.segment=function(i){return g.getSegment(i)}},initialize:function(){var d=this,a=d.chart.getChartStore(),e=a.data.items,b,c,f;d.yField=[];if(d.label.field){for(b=0,c=e.length;b<c;b++){f=e[b];d.yField.push(f.get(d.label.field))}}},getSegment:function(b){var B=this,A=B.rad,d=Math.cos,a=Math.sin,m=Math.abs,j=B.centerX,h=B.centerY,v=0,u=0,t=0,q=0,g=0,f=0,e=0,c=0,w=0.01,l=b.endRho-b.startRho,p=b.startAngle,o=b.endAngle,i=(p+o)/2*A,k=b.margin||0,s=m(o-p)>180,C=Math.min(p,o)*A,z=Math.max(p,o)*A,n=false;j+=k*d(i);h+=k*a(i);v=j+b.startRho*d(C);g=h+b.startRho*a(C);u=j+b.endRho*d(C);f=h+b.endRho*a(C);t=j+b.startRho*d(z);e=h+b.startRho*a(z);q=j+b.endRho*d(z);c=h+b.endRho*a(z);if(m(v-t)<=w&&m(g-e)<=w){n=true}if(n){return{path:[["M",v,g],["L",u,f],["A",b.endRho,b.endRho,0,+s,1,q,c],["Z"]]}}else{return{path:[["M",v,g],["L",u,f],["A",b.endRho,b.endRho,0,+s,1,q,c],["L",t,e],["A",b.startRho,b.startRho,0,+s,0,v,g],["Z"]]}}},calcMiddle:function(o){var j=this,k=j.rad,n=o.slice,m=j.centerX,l=j.centerY,i=n.startAngle,e=n.endAngle,h=Math.max(("rho" in n)?n.rho:j.radius,j.label.minMargin),g=+j.donut,b=Math.min(i,e)*k,a=Math.max(i,e)*k,d=-(b+(a-b)/2),f=m+(o.endRho+o.startRho)/2*Math.cos(d),c=l-(o.endRho+o.startRho)/2*Math.sin(d);o.middle={x:f,y:c}},drawSeries:function(){var v=this,V=v.chart,b=V.getChartStore(),z=v.group,R=v.chart.animate,C=v.chart.axes.get(0),D=C&&C.minimum||v.minimum||0,H=C&&C.maximum||v.maximum||0,m=v.angleField||v.field||v.xField,L=V.surface,G=V.chartBBox,g=v.rad,c=+v.donut,W={},A=[],l=v.seriesStyle,a=v.seriesLabelStyle,f=v.colorArrayStyle,y=f&&f.length||0,J=V.maxGutter[0],I=V.maxGutter[1],h=Math.cos,r=Math.sin,s,e,d,u,q,B,N,E,F,K,T,S,k,U,w,n,P,Q,o,x,t,O,M;Ext.apply(l,v.style||{});v.setBBox();x=v.bbox;if(v.colorSet){f=v.colorSet;y=f.length}if(!b||!b.getCount()||v.seriesIsHidden){v.hide();v.items=[];return}e=v.centerX=G.x+(G.width/2);d=v.centerY=G.y+G.height;v.radius=Math.min(e-G.x,d-G.y);v.slices=q=[];v.items=A=[];if(!v.value){K=b.getAt(0);v.value=K.get(m)}N=v.value;if(v.needle){O={series:v,value:N,startAngle:-180,endAngle:0,rho:v.radius};t=-180*(1-(N-D)/(H-D));q.push(O)}else{t=-180*(1-(N-D)/(H-D));O={series:v,value:N,startAngle:-180,endAngle:t,rho:v.radius};M={series:v,value:v.maximum-N,startAngle:t,endAngle:0,rho:v.radius};q.push(O,M)}for(T=0,F=q.length;T<F;T++){u=q[T];B=z.getAt(T);s=Ext.apply({segment:{startAngle:u.startAngle,endAngle:u.endAngle,margin:0,rho:u.rho,startRho:u.rho*+c/100,endRho:u.rho}},Ext.apply(l,f&&{fill:f[T%y]}||{}));E=Ext.apply({},s.segment,{slice:u,series:v,storeItem:K,index:T});A[T]=E;if(!B){o=Ext.apply({type:"path",group:z},Ext.apply(l,f&&{fill:f[T%y]}||{}));B=L.add(Ext.apply(o,s))}u.sprite=u.sprite||[];E.sprite=B;u.sprite.push(B);if(R){s=v.renderer(B,K,s,T,b);B._to=s;v.onAnimate(B,{to:s})}else{s=v.renderer(B,K,Ext.apply(s,{hidden:false}),T,b);B.setAttributes(s,true)}}if(v.needle){t=t*Math.PI/180;if(!v.needleSprite){v.needleSprite=v.chart.surface.add({type:"path",path:["M",e+(v.radius*+c/100)*h(t),d+-Math.abs((v.radius*+c/100)*r(t)),"L",e+v.radius*h(t),d+-Math.abs(v.radius*r(t))],"stroke-width":4,stroke:"#222"})}else{if(R){v.onAnimate(v.needleSprite,{to:{path:["M",e+(v.radius*+c/100)*h(t),d+-Math.abs((v.radius*+c/100)*r(t)),"L",e+v.radius*h(t),d+-Math.abs(v.radius*r(t))]}})}else{v.needleSprite.setAttributes({type:"path",path:["M",e+(v.radius*+c/100)*h(t),d+-Math.abs((v.radius*+c/100)*r(t)),"L",e+v.radius*h(t),d+-Math.abs(v.radius*r(t))]})}}v.needleSprite.setAttributes({hidden:false},true)}delete v.value},setValue:function(a){this.value=a;this.drawSeries()},onCreateLabel:function(c,b,a,d){},onPlaceLabel:function(c,f,e,d,g,a,b){},onPlaceCallout:function(){},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(k,h,m,e){var g=this,d=g.centerX,c=g.centerY,o=Math.abs,n=o(k-d),l=o(h-c),f=m.startAngle,a=m.endAngle,j=Math.sqrt(n*n+l*l),b=Math.atan2(h-c,k-d)/g.rad;return(e===0)&&(b>=f&&b<a&&j>=m.startRho&&j<=m.endRho)},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.drawSeries()}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.LineSeries","Ext.chart.LineChart"],requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.draw.Draw","Ext.fx.Anim"],type:"line",alias:"series.line",selectionTolerance:20,showMarkers:true,markerConfig:{},style:{},smooth:false,defaultSmoothness:3,fill:false,constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,f=e.chart.shadow,d,b;c.highlightCfg=Ext.Object.merge({"stroke-width":3},c.highlightCfg);Ext.apply(e,c,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]});e.group=a.getGroup(e.seriesId);if(e.showMarkers){e.markerGroup=a.getGroup(e.seriesId+"-markers")}if(f){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},shrink:function(b,j,k){var g=b.length,h=Math.floor(g/k),f=1,d=0,a=0,e=[+b[0]],c=[+j[0]];for(;f<g;++f){d+=+b[f]||0;a+=+j[f]||0;if(f%h==0){e.push(d/h);c.push(a/h);d=0;a=0}}return{x:e,y:c}},drawSeries:function(){var am=this,az=am.chart,U=az.axes,au=az.getChartStore(),z=au.data.items,aq,X=au.getCount(),v=am.chart.surface,at={},T=am.group,M=am.showMarkers,aF=am.markerGroup,F=az.shadow,E=am.shadowGroups,aa=am.shadowAttributes,Q=am.smooth,q=E.length,ax=["M"],V=["M"],d=["M"],b=["M"],L=az.markerIndex,al=[].concat(am.axis),ak,aA=[],aj={},ad=[],w={},K=false,S=[],aE=am.markerStyle,ac=am.seriesStyle,u=am.colorArrayStyle,R=u&&u.length||0,N=Ext.isNumber,aB=am.seriesIdx,g=am.getAxesForXAndYFields(),l=g.xAxis,aD=g.yAxis,af,h,ae,ag,C,c,ah,J,I,f,e,t,r,Z,P,O,ay,m,H,G,aG,n,p,D,a,ab,ai,B,aw,A,av,o,aC,ar,ap,W,k,s,an,ao,Y;if(am.fireEvent("beforedraw",am)===false){return}if(!X||am.seriesIsHidden){am.hide();am.items=[];if(am.line){am.line.hide(true);if(am.line.shadows){af=am.line.shadows;for(O=0,q=af.length;O<q;O++){h=af[O];h.hide(true)}}if(am.fillPath){am.fillPath.hide(true)}}am.line=null;am.fillPath=null;return}ar=Ext.apply(aE||{},am.markerConfig,{fill:am.seriesStyle.fill||u[aB%u.length]});W=ar.type;delete ar.type;ap=ac;if(!ap["stroke-width"]){ap["stroke-width"]=0.5}s="opacity" in ap?ap.opacity:1;Y="opacity" in ap?ap.opacity:0.3;an="lineOpacity" in ap?ap.lineOpacity:s;ao="fillOpacity" in ap?ap.fillOpacity:Y;if(L&&aF&&aF.getCount()){for(P=0;P<L;P++){G=aF.getAt(P);aF.remove(G);aF.add(G);aG=aF.getAt(aF.getCount()-2);G.setAttributes({x:0,y:0,translate:{x:aG.attr.translation.x,y:aG.attr.translation.y}},true)}}am.unHighlightItem();am.cleanHighlights();am.setBBox();at=am.bbox;am.clipRect=[at.x,at.y,at.width,at.height];if(m=U.get(l)){H=m.applyData();B=H.from;aw=H.to}if(m=U.get(aD)){H=m.applyData();A=H.from;av=H.to}if(am.xField&&!Ext.isNumber(B)){m=am.getMinMaxXValues();B=m[0];aw=m[1]}if(am.yField&&!Ext.isNumber(A)){m=am.getMinMaxYValues();A=m[0];av=m[1]}if(isNaN(B)){B=0;ab=at.width/((X-1)||1)}else{ab=at.width/((aw-B)||(X-1)||1)}if(isNaN(A)){A=0;ai=at.height/((X-1)||1)}else{ai=at.height/((av-A)||(X-1)||1)}for(P=0,ay=z.length;P<ay;P++){aq=z[P];p=aq.get(am.xField);if(typeof p=="string"||typeof p=="object"&&!Ext.isDate(p)||l&&U.get(l)&&U.get(l).type=="Category"){if(p in aj){p=aj[p]}else{p=aj[p]=P}}D=aq.get(am.yField);if(typeof D=="undefined"||(typeof D=="string"&&!D)){continue}if(typeof D=="string"||typeof D=="object"&&!Ext.isDate(D)||aD&&U.get(aD)&&U.get(aD).type=="Category"){D=P}S.push(P);aA.push(p);ad.push(D)}ay=aA.length;if(ay>at.width){a=am.shrink(aA,ad,at.width);aA=a.x;ad=a.y}am.items=[];k=0;ay=aA.length;for(P=0;P<ay;P++){p=aA[P];D=ad[P];if(D===false){if(V.length==1){V=[]}K=true;am.items.push(false);continue}else{J=(at.x+(p-B)*ab).toFixed(2);I=((at.y+at.height)-(D-A)*ai).toFixed(2);if(K){K=false;V.push("M")}V=V.concat([J,I])}if((typeof r=="undefined")&&(typeof I!="undefined")){r=I;t=J}if(!am.line||az.resizing){ax=ax.concat([J,at.y+at.height/2])}if(az.animate&&az.resizing&&am.line){am.line.setAttributes({path:ax,opacity:an},true);if(am.fillPath){am.fillPath.setAttributes({path:ax,opacity:ao},true)}if(am.line.shadows){af=am.line.shadows;for(O=0,q=af.length;O<q;O++){h=af[O];h.setAttributes({path:ax},true)}}}if(M){G=aF.getAt(k++);if(!G){G=Ext.chart.Shape[W](v,Ext.apply({group:[T,aF],x:0,y:0,translate:{x:+(f||J),y:e||(at.y+at.height/2)},value:'"'+p+", "+D+'"',zIndex:4000},ar));G._to={translate:{x:+J,y:+I}}}else{G.setAttributes({value:'"'+p+", "+D+'"',x:0,y:0,hidden:false},true);G._to={translate:{x:+J,y:+I}}}}am.items.push({series:am,value:[p,D],point:[J,I],sprite:G,storeItem:au.getAt(S[P])});f=J;e=I}if(V.length<=1){return}if(am.smooth){b=Ext.draw.Draw.smooth(V,N(Q)?Q:am.defaultSmoothness)}d=Q?b:V;if(az.markerIndex&&am.previousPath){ag=am.previousPath;if(!Q){Ext.Array.erase(ag,1,2)}}else{ag=V}if(!am.line){am.line=v.add(Ext.apply({type:"path",group:T,path:ax,stroke:ap.stroke||ap.fill},ap||{}));am.line.setAttributes({opacity:an},true);if(F){am.line.setAttributes(Ext.apply({},am.shadowOptions),true)}am.line.setAttributes({fill:"none",zIndex:3000});if(!ap.stroke&&R){am.line.setAttributes({stroke:u[aB%R]},true)}if(F){af=am.line.shadows=[];for(ae=0;ae<q;ae++){ak=aa[ae];ak=Ext.apply({},ak,{path:ax});h=v.add(Ext.apply({},{type:"path",group:E[ae]},ak));af.push(h)}}}if(am.fill){c=d.concat([["L",J,at.y+at.height],["L",t,at.y+at.height],["L",t,r]]);if(!am.fillPath){am.fillPath=v.add({group:T,type:"path",fill:ap.fill||u[aB%R],path:ax})}}Z=M&&aF.getCount();if(az.animate){C=am.fill;o=am.line;ah=am.renderer(o,false,{path:d},P,au);Ext.apply(ah,ap||{},{stroke:ap.stroke||ap.fill});delete ah.fill;o.show(true);if(az.markerIndex&&am.previousPath){am.animation=aC=am.onAnimate(o,{to:ah,from:{path:ag}})}else{am.animation=aC=am.onAnimate(o,{to:ah})}if(F){af=o.shadows;for(O=0;O<q;O++){af[O].show(true);if(az.markerIndex&&am.previousPath){am.onAnimate(af[O],{to:{path:d},from:{path:ag}})}else{am.onAnimate(af[O],{to:{path:d}})}}}if(C){am.fillPath.show(true);am.onAnimate(am.fillPath,{to:Ext.apply({},{path:c,fill:ap.fill||u[aB%R],"stroke-width":0,opacity:ao},ap||{})})}if(M){k=0;for(P=0;P<ay;P++){if(am.items[P]){n=aF.getAt(k++);if(n){ah=am.renderer(n,au.getAt(P),n._to,P,au);am.onAnimate(n,{to:Ext.apply(ah,ar||{})});n.show(true)}}}for(;k<Z;k++){n=aF.getAt(k);n.hide(true)}}}else{ah=am.renderer(am.line,false,{path:d,hidden:false},P,au);Ext.apply(ah,ap||{},{stroke:ap.stroke||ap.fill});delete ah.fill;am.line.setAttributes(ah,true);am.line.setAttributes({opacity:an},true);if(F){af=am.line.shadows;for(O=0;O<q;O++){af[O].setAttributes({path:d,hidden:false},true)}}if(am.fill){am.fillPath.setAttributes({path:c,hidden:false,opacity:ao},true)}if(M){k=0;for(P=0;P<ay;P++){if(am.items[P]){n=aF.getAt(k++);if(n){ah=am.renderer(n,au.getAt(P),n._to,P,au);n.setAttributes(Ext.apply(ar||{},ah||{}),true);if(!n.attr.hidden){n.show(true)}}}}for(;k<Z;k++){n=aF.getAt(k);n.hide(true)}}}if(az.markerIndex){if(am.smooth){Ext.Array.erase(V,1,2)}else{Ext.Array.splice(V,1,0,V[1],V[2])}am.previousPath=V}am.renderLabels();am.renderCallouts();am.fireEvent("draw",am)},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,h=f.bbox,b=Ext.apply(a,f.seriesLabelStyle);return f.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:g,x:j.point[0],y:h.y+h.height/2},b||{}))},onPlaceLabel:function(f,j,r,o,n,d){var t=this,k=t.chart,q=k.resizing,s=t.label,p=s.renderer,b=s.field,a=t.bbox,h=r.point[0],g=r.point[1],c=r.sprite.attr.radius,e,m,l;f.setAttributes({text:p(j.get(b)),hidden:true},true);if(n=="rotate"){f.setAttributes({"text-anchor":"start",rotation:{x:h,y:g,degrees:-45}},true);e=f.getBBox();m=e.width;l=e.height;h=h<a.x?a.x:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=(g-l<a.y)?a.y+l:g}else{if(n=="under"||n=="over"){e=r.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);g=g+(n=="over"?-e.height:e.height);e=f.getBBox();m=e.width/2;l=e.height/2;h=h-m<a.x?a.x+m:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=g-l<a.y?a.y+l:g;g=(g+l>a.y+a.height)?(g-(g+l-a.y-a.height)):g}}if(t.chart.animate&&!t.chart.resizing){f.show(true);t.onAnimate(f,{to:{x:h,y:g}})}else{f.setAttributes({x:h,y:g},true);if(q&&t.animation){t.animation.on("afteranimate",function(){f.show(true)})}else{f.show(true)}}},highlightItem:function(){var a=this;a.callParent(arguments);if(a.line&&!a.highlighted){if(!("__strokeWidth" in a.line)){a.line.__strokeWidth=parseFloat(a.line.attr["stroke-width"])||0}if(a.line.__anim){a.line.__anim.paused=true}a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth+3}});a.highlighted=true}},unHighlightItem:function(){var a=this;a.callParent(arguments);if(a.line&&a.highlighted){a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth}});a.highlighted=false}},onPlaceCallout:function(l,q,I,F,E,d,j){if(!E){return}var L=this,r=L.chart,C=r.surface,G=r.resizing,K=L.callouts,s=L.items,u=F==0?false:s[F-1].point,w=(F==s.length-1)?false:s[F+1].point,c=[+I.point[0],+I.point[1]],z,f,M,J,n,o,H=K.offsetFromViz||30,B=K.offsetToSide||10,A=K.offsetBox||3,g,e,h,v,t,D=L.clipRect,b={width:K.styles.width||10,height:K.styles.height||10},m,k;if(!u){u=c}if(!w){w=c}J=(w[1]-u[1])/(w[0]-u[0]);n=(c[1]-u[1])/(c[0]-u[0]);o=(w[1]-c[1])/(w[0]-c[0]);f=Math.sqrt(1+J*J);z=[1/f,J/f];M=[-z[1],z[0]];if(n>0&&o<0&&M[1]<0||n<0&&o>0&&M[1]>0){M[0]*=-1;M[1]*=-1}else{if(Math.abs(n)<Math.abs(o)&&M[0]<0||Math.abs(n)>Math.abs(o)&&M[0]>0){M[0]*=-1;M[1]*=-1}}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;if(g<D[0]||(g+h)>(D[0]+D[2])){M[0]*=-1}if(e<D[1]||(e+v)>(D[1]+D[3])){M[1]*=-1}m=c[0]+M[0]*H;k=c[1]+M[1]*H;g=m+(M[0]>0?0:-(b.width+2*A));e=k-b.height/2-A;h=b.width+2*A;v=b.height+2*A;if(r.animate){L.onAnimate(l.lines,{to:{path:["M",c[0],c[1],"L",m,k,"Z"]}});if(l.panel){l.panel.setPosition(g,e,true)}}else{l.lines.setAttributes({path:["M",c[0],c[1],"L",m,k,"Z"]},true);if(l.panel){l.panel.setPosition(g,e)}}for(t in l){l[t].show(true)}},isItemInPoint:function(h,f,z,p){var B=this,m=B.items,r=B.selectionTolerance,j=null,w,c,o,u,g,v,b,s,a,k,A,e,d,n,t,q,C=Math.sqrt,l=Math.abs;c=m[p];w=p&&m[p-1];if(p>=g){w=m[g-1]}o=w&&w.point;u=c&&c.point;v=w?o[0]:u[0]-r;b=w?o[1]:u[1];s=c?u[0]:o[0]+r;a=c?u[1]:o[1];e=C((h-v)*(h-v)+(f-b)*(f-b));d=C((h-s)*(h-s)+(f-a)*(f-a));n=Math.min(e,d);if(n<=r){return n==e?w:c}return false},toggleAll:function(a){var e=this,b,d,f,c;if(!a){Ext.chart.series.Cartesian.prototype.hideAll.call(e)}else{Ext.chart.series.Cartesian.prototype.showAll.call(e)}if(e.line){e.line.setAttributes({hidden:!a},true);if(e.line.shadows){for(b=0,c=e.line.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}if(e.fillPath){e.fillPath.setAttributes({hidden:!a},true)}},hideAll:function(){this.toggleAll(false)},showAll:function(){this.toggleAll(true)}});Ext.define("Ext.chart.series.Pie",{alternateClassName:["Ext.chart.PieSeries","Ext.chart.PieChart"],extend:"Ext.chart.series.Series",type:"pie",alias:"series.pie",accuracy:100000,rad:Math.PI*2/100000,highlightDuration:150,angleField:false,lengthField:false,donut:false,showInLegend:false,style:{},constructor:function(b){this.callParent(arguments);var g=this,f=g.chart,a=f.surface,h=f.store,j=f.shadow,d,c,e;b.highlightCfg=Ext.merge({segment:{margin:20}},b.highlightCfg);Ext.apply(g,b,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});g.group=a.getGroup(g.seriesId);if(j){for(d=0,c=g.shadowAttributes.length;d<c;d++){g.shadowGroups.push(a.getGroup(g.seriesId+"-shadows"+d))}}a.customAttributes.segment=function(k){var i=g.getSegment(k);if(!i.path||i.path.length===0){i.path=["M",0,0]}return i};g.__excludes=g.__excludes||[]},initialize:function(){var d=this,a=d.chart.getChartStore(),e=a.data.items,b,c,f;d.yField=[];if(d.label.field){for(b=0,c=e.length;b<c;b++){f=e[b];d.yField.push(f.get(d.label.field))}}},getSegment:function(d){var I=this,H=I.rad,h=Math.cos,a=Math.sin,o=I.centerX,m=I.centerY,D=0,C=0,B=0,z=0,k=0,j=0,i=0,f=0,v=0,c=0,u=0,b=0,F=0.01,w=d.startAngle,t=d.endAngle,n=(w+t)/2*H,q=d.margin||0,J=Math.min(w,t)*H,G=Math.max(w,t)*H,s=h(J),g=a(J),r=h(G),e=a(G),l=h(n),E=a(n),A=0,p=0.7071067811865476;if(G-J<F){return{path:""}}if(q!==0){o+=q*l;m+=q*E}C=o+d.endRho*s;j=m+d.endRho*g;z=o+d.endRho*r;f=m+d.endRho*e;u=o+d.endRho*l;b=m+d.endRho*E;if(d.startRho!==0){D=o+d.startRho*s;k=m+d.startRho*g;B=o+d.startRho*r;i=m+d.startRho*e;v=o+d.startRho*l;c=m+d.startRho*E;return{path:[["M",C,j],["A",d.endRho,d.endRho,0,0,1,u,b],["L",u,b],["A",d.endRho,d.endRho,0,A,1,z,f],["L",z,f],["L",B,i],["A",d.startRho,d.startRho,0,A,0,v,c],["L",v,c],["A",d.startRho,d.startRho,0,0,0,D,k],["L",D,k],["Z"]]}}else{return{path:[["M",o,m],["L",C,j],["A",d.endRho,d.endRho,0,0,1,u,b],["L",u,b],["A",d.endRho,d.endRho,0,A,1,z,f],["L",z,f],["L",o,m],["Z"]]}}},calcMiddle:function(m){var h=this,i=h.rad,l=m.slice,k=h.centerX,j=h.centerY,g=l.startAngle,d=l.endAngle,f=+h.donut,c=-(g+d)*i/2,a=(m.endRho+m.startRho)/2,e=k+a*Math.cos(c),b=j-a*Math.sin(c);m.middle={x:e,y:b}},drawSeries:function(){var r=this,a=r.chart.getChartStore(),V=a.data.items,H,w=r.group,R=r.chart.animate,h=r.angleField||r.field||r.xField,z=[].concat(r.lengthField),Q=0,W=r.chart,I=W.surface,F=W.chartBBox,f=W.shadow,P=r.shadowGroups,O=r.shadowAttributes,Z=P.length,J=z.length,A=0,b=+r.donut,Y=[],x=[],t=0,L=0,s=0,g=r.seriesStyle,e=r.colorArrayStyle,v=e&&e.length||0,n,X,B,G,D,d,c,o,k=0,q,m,y,K,C,aa,E,T,S,U,M,N,l,u;Ext.apply(g,r.style||{});r.setBBox();u=r.bbox;if(r.colorSet){e=r.colorSet;v=e.length}if(!a||!a.getCount()||r.seriesIsHidden){r.hide();r.items=[];return}r.unHighlightItem();r.cleanHighlights();d=r.centerX=F.x+(F.width/2);c=r.centerY=F.y+(F.height/2);r.radius=Math.min(d-F.x,c-F.y);r.slices=m=[];r.items=x=[];for(T=0,E=V.length;T<E;T++){H=V[T];if(this.__excludes&&this.__excludes[T]){continue}t+=+H.get(h);if(z[0]){for(S=0,Q=0;S<J;S++){Q+=+H.get(z[S])}Y[T]=Q;L=Math.max(L,Q)}}t=t||1;for(T=0,E=V.length;T<E;T++){H=V[T];if(this.__excludes&&this.__excludes[T]){K=0}else{K=H.get(h);if(k==0){k=1}}if(k==1){k=2;r.firstAngle=s=r.accuracy*K/t/2;for(S=0;S<T;S++){m[S].startAngle=m[S].endAngle=r.firstAngle}}U=s-r.accuracy*K/t;q={series:r,value:K,startAngle:s,endAngle:U,storeItem:H};if(z[0]){aa=+Y[T];q.rho=Math.floor(r.radius/L*aa)}else{q.rho=r.radius}m[T]=q;(function(){s=U})()}if(f){for(T=0,E=m.length;T<E;T++){q=m[T];q.shadowAttrs=[];for(S=0,A=0,B=[];S<J;S++){y=w.getAt(T*J+S);o=z[S]?a.getAt(T).get(z[S])/Y[T]*q.rho:q.rho;n={segment:{startAngle:q.startAngle,endAngle:q.endAngle,margin:0,rho:q.rho,startRho:A+(o*b/100),endRho:A+o},hidden:!q.value&&(q.startAngle%r.accuracy)==(q.endAngle%r.accuracy)};for(D=0,B=[];D<Z;D++){X=O[D];G=P[D].getAt(T);if(!G){G=W.surface.add(Ext.apply({},{type:"path",group:P[D],strokeLinejoin:"round"},n,X))}X=r.renderer(G,a.getAt(T),Ext.apply({},n,X),T,a);if(R){r.onAnimate(G,{to:X})}else{G.setAttributes(X,true)}B.push(G)}q.shadowAttrs[S]=B}}}for(T=0,E=m.length;T<E;T++){q=m[T];for(S=0,A=0;S<J;S++){y=w.getAt(T*J+S);o=z[S]?a.getAt(T).get(z[S])/Y[T]*q.rho:q.rho;n=Ext.apply({segment:{startAngle:q.startAngle,endAngle:q.endAngle,margin:0,rho:q.rho,startRho:A+(o*b/100),endRho:A+o},hidden:(!q.value&&(q.startAngle%r.accuracy)==(q.endAngle%r.accuracy))},Ext.apply(g,e&&{fill:e[(J>1?S:T)%v]}||{}));C=Ext.apply({},n.segment,{slice:q,series:r,storeItem:q.storeItem,index:T});r.calcMiddle(C);if(f){C.shadows=q.shadowAttrs[S]}x[T]=C;if(!y){l=Ext.apply({type:"path",group:w,middle:C.middle},Ext.apply(g,e&&{fill:e[(J>1?S:T)%v]}||{}));y=I.add(Ext.apply(l,n))}q.sprite=q.sprite||[];C.sprite=y;q.sprite.push(y);q.point=[C.middle.x,C.middle.y];if(R){n=r.renderer(y,a.getAt(T),n,T,a);y._to=n;y._animating=true;r.onAnimate(y,{to:n,listeners:{afteranimate:{fn:function(){this._animating=false},scope:y}}})}else{n=r.renderer(y,a.getAt(T),Ext.apply(n,{hidden:false}),T,a);y.setAttributes(n,true)}A+=o}}E=w.getCount();for(T=0;T<E;T++){if(!m[(T/J)>>0]&&w.getAt(T)){w.getAt(T).hide(true)}}if(f){Z=P.length;for(D=0;D<E;D++){if(!m[(D/J)>>0]){for(S=0;S<Z;S++){if(P[S].getAt(D)){P[S].getAt(D).hide(true)}}}}}r.renderLabels();r.renderCallouts()},onCreateLabel:function(f,k,e,g){var h=this,j=h.labelsGroup,a=h.label,d=h.centerX,c=h.centerY,l=k.middle,b=Ext.apply(h.seriesLabelStyle||{},a||{});return h.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:j,x:l.x,y:l.y},b))},onPlaceLabel:function(j,o,w,s,r,e,f){var A=this,p=A.chart,v=p.resizing,z=A.label,t=z.renderer,c=[].concat(z.field),l=A.centerX,k=A.centerY,B=w.middle,b={x:B.x,y:B.y},n=B.x-l,m=B.y-k,q={},d=1,h=Math.atan2(m,n||1),u=h*180/Math.PI,g;b.hidden=false;if(this.__excludes&&this.__excludes[s]){b.hidden=true}function a(i){if(i<0){i+=360}return i%360}j.setAttributes({text:t(o.get(c[f]))},true);switch(r){case"outside":d=Math.sqrt(n*n+m*m)*2;b.x=d*Math.cos(h)+l;b.y=d*Math.sin(h)+k;break;case"rotate":u=a(u);u=(u>90&&u<270)?u+180:u;g=j.attr.rotation.degrees;if(g!=null&&Math.abs(g-u)>180*0.5){if(u>g){u-=360}else{u+=360}u=u%360}else{u=a(u)}b.rotate={degrees:u,x:b.x,y:b.y};break;default:break}b.translate={x:0,y:0};if(e&&!v&&(r!="rotate"||g!=null)){A.onAnimate(j,{to:b})}else{j.setAttributes(b,true)}j._from=q},onPlaceCallout:function(k,n,w,u,t,d,e){var z=this,o=z.chart,h=z.centerX,g=z.centerY,A=w.middle,b={x:A.x,y:A.y},l=A.x-h,j=A.y-g,c=1,m,f=Math.atan2(j,l||1),a=k.label.getBBox(),v=20,s=10,r=10,q;c=w.endRho+v;m=(w.endRho+w.startRho)/2+(w.endRho-w.startRho)/3;b.x=c*Math.cos(f)+h;b.y=c*Math.sin(f)+g;l=m*Math.cos(f);j=m*Math.sin(f);if(o.animate){z.onAnimate(k.lines,{to:{path:["M",l+h,j+g,"L",b.x,b.y,"Z","M",b.x,b.y,"l",l>0?s:-s,0,"z"]}});z.onAnimate(k.box,{to:{x:b.x+(l>0?s:-(s+a.width+2*r)),y:b.y+(j>0?(-a.height-r/2):(-a.height-r/2)),width:a.width+2*r,height:a.height+2*r}});z.onAnimate(k.label,{to:{x:b.x+(l>0?(s+r):-(s+a.width+r)),y:b.y+(j>0?-a.height/4:-a.height/4)}})}else{k.lines.setAttributes({path:["M",l+h,j+g,"L",b.x,b.y,"Z","M",b.x,b.y,"l",l>0?s:-s,0,"z"]},true);k.box.setAttributes({x:b.x+(l>0?s:-(s+a.width+2*r)),y:b.y+(j>0?(-a.height-r/2):(-a.height-r/2)),width:a.width+2*r,height:a.height+2*r},true);k.label.setAttributes({x:b.x+(l>0?(s+r):-(s+a.width+r)),y:b.y+(j>0?-a.height/4:-a.height/4)},true)}for(q in k){k[q].show(true)}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(k,h,m,e){var g=this,d=g.centerX,c=g.centerY,o=Math.abs,n=o(k-d),l=o(h-c),f=m.startAngle,a=m.endAngle,j=Math.sqrt(n*n+l*l),b=Math.atan2(h-c,k-d)/g.rad;if(b>g.firstAngle){b-=g.accuracy}return(b<=f&&b>a&&j>=m.startRho&&j<=m.endRho)},hideAll:function(c){var f,b,h,g,e,a,d;c=(isNaN(this._index)?c:this._index)||0;this.__excludes=this.__excludes||[];this.__excludes[c]=true;d=this.slices[c].sprite;for(e=0,a=d.length;e<a;e++){d[e].setAttributes({hidden:true},true)}if(this.slices[c].shadowAttrs){for(f=0,g=this.slices[c].shadowAttrs,b=g.length;f<b;f++){h=g[f];for(e=0,a=h.length;e<a;e++){h[e].setAttributes({hidden:true},true)}}}this.drawSeries()},showAll:function(a){a=(isNaN(this._index)?a:this._index)||0;this.__excludes[a]=false;this.drawSeries()},highlightItem:function(q){var t=this,s=t.rad,v,d,n,p,a,e,j,b,l,c,f,o,g,u,m,k,h;q=q||this.items[this._index];this.unHighlightItem();if(!q||t.animating||(q.sprite&&q.sprite._animating)){return}t.callParent([q]);if(!t.highlight){return}if("segment" in t.highlightCfg){v=t.highlightCfg.segment;d=t.chart.animate;if(t.labelsGroup){f=t.labelsGroup;o=t.label.display;g=f.getAt(q.index);u=(q.startAngle+q.endAngle)/2*s;m=v.margin||0;k=m*Math.cos(u);h=m*Math.sin(u);if(Math.abs(k)<1e-10){k=0}if(Math.abs(h)<1e-10){h=0}if(d){g.stopAnimation();g.animate({to:{translate:{x:k,y:h}},duration:t.highlightDuration})}else{g.setAttributes({translate:{x:k,y:h}},true)}}if(t.chart.shadow&&q.shadows){p=0;a=q.shadows;j=a.length;for(;p<j;p++){e=a[p];b={};l=q.sprite._from.segment;for(c in l){if(!(c in v)){b[c]=l[c]}}n={segment:Ext.applyIf(b,t.highlightCfg.segment)};if(d){e.stopAnimation();e.animate({to:n,duration:t.highlightDuration})}else{e.setAttributes(n,true)}}}}},unHighlightItem:function(){var v=this,k,e,d,h,s,r,q,o,w,l,c,a,u,m,b,f,t,g,n;if(!v.highlight){return}if(("segment" in v.highlightCfg)&&v.items){k=v.items;e=v.chart.animate;d=!!v.chart.shadow;h=v.labelsGroup;s=k.length;r=0;q=0;o=v.label.display;for(;r<s;r++){t=k[r];if(!t){continue}m=t.sprite;if(m&&m._highlighted){if(h){g=h.getAt(t.index);n=Ext.apply({translate:{x:0,y:0}},o=="rotate"?{rotate:{x:g.attr.x,y:g.attr.y,degrees:g.attr.rotation.degrees}}:{});if(e){g.stopAnimation();g.animate({to:n,duration:v.highlightDuration})}else{g.setAttributes(n,true)}}if(d){b=t.shadows;w=b.length;for(;q<w;q++){c={};a=t.sprite._to.segment;u=t.sprite._from.segment;Ext.apply(c,u);for(l in a){if(!(l in u)){c[l]=a[l]}}f=b[q];if(e){f.stopAnimation();f.animate({to:{segment:c},duration:v.highlightDuration})}else{f.setAttributes({segment:c},true)}}}}}}v.callParent(arguments)},getLegendColor:function(a){var b=this;return(b.colorSet&&b.colorSet[a%b.colorSet.length])||b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",requires:["Ext.chart.Shape","Ext.fx.Anim"],type:"radar",alias:"series.radar",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;e.group=a.getGroup(e.seriesId);if(e.showMarkers){e.markerGroup=a.getGroup(e.seriesId+"-markers")}},drawSeries:function(){var v=this,c=v.chart.getChartStore(),R=c.data.items,S,H,w=v.group,A,T=v.chart,K=T.series.items,L,u,k,P=T.animate,n=v.field||v.yField,J=T.surface,E=T.chartBBox,D=v.seriesIdx,h=v.colorArrayStyle,f,e,z,M,q=0,a=[],C=Math.max,j=Math.cos,r=Math.sin,p=Math.PI*2,O=c.getCount(),g,N,I,G,F,Q,t,m=v.seriesStyle,b=v.seriesLabelStyle,o=T.resizing||!v.radar,B=T.axes&&T.axes.get(0),U=!(B&&B.maximum);v.setBBox();q=U?0:(B.maximum||0);Ext.apply(m,v.style||{});if(!c||!c.getCount()||v.seriesIsHidden){v.hide();v.items=[];if(v.radar){v.radar.hide(true)}v.radar=null;return}if(!m.stroke){m.stroke=h[D%h.length]}v.unHighlightItem();v.cleanHighlights();f=v.centerX=E.x+(E.width/2);e=v.centerY=E.y+(E.height/2);v.radius=M=Math.min(E.width,E.height)/2;v.items=z=[];if(U){for(L=0,u=K.length;L<u;L++){k=K[L];a.push(k.yField)}for(S=0;S<O;S++){H=R[S];for(Q=0,t=a.length;Q<t;Q++){q=C(+H.get(a[Q]),q)}}}q=q||1;g=[];N=[];for(Q=0;Q<O;Q++){H=R[Q];F=M*H.get(n)/q;I=F*j(Q/O*p);G=F*r(Q/O*p);if(Q==0){N.push("M",I+f,G+e);g.push("M",0.01*I+f,0.01*G+e)}else{N.push("L",I+f,G+e);g.push("L",0.01*I+f,0.01*G+e)}z.push({sprite:false,point:[f+I,e+G],storeItem:H,series:v})}N.push("Z");if(!v.radar){v.radar=J.add(Ext.apply({type:"path",group:w,path:g},m||{}))}if(T.resizing){v.radar.setAttributes({path:g},true)}if(T.animate){v.onAnimate(v.radar,{to:Ext.apply({path:N},m||{})})}else{v.radar.setAttributes(Ext.apply({path:N},m||{}),true)}if(v.showMarkers){v.drawMarkers()}v.renderLabels();v.renderCallouts()},drawMarkers:function(){var m=this,j=m.chart,a=j.surface,b=Ext.apply({},m.markerStyle||{}),h=Ext.apply(b,m.markerConfig,{fill:m.colorArrayStyle[m.seriesIdx%m.colorArrayStyle.length]}),k=m.items,n=h.type,p=m.markerGroup,e=m.centerX,d=m.centerY,o,g,c,f;delete h.type;for(g=0,c=k.length;g<c;g++){o=k[g];f=p.getAt(g);if(!f){f=Ext.chart.Shape[n](a,Ext.apply({group:p,x:0,y:0,translate:{x:e,y:d}},h))}else{f.show()}o.sprite=f;if(j.resizing){f.setAttributes({x:0,y:0,translate:{x:e,y:d}},true)}f._to={translate:{x:o.point[0],y:o.point[1]}};if(j.animate){m.onAnimate(f,{to:f._to})}else{f.setAttributes(Ext.apply(f._to,h||{}),true)}}},isItemInPoint:function(c,f,e){var b,d=10,a=Math.abs;b=e.point;return(a(b[0]-c)<=d&&a(b[1]-f)<=d)},onCreateLabel:function(f,l,e,g){var h=this,k=h.labelsGroup,a=h.label,d=h.centerX,c=h.centerY,j=l.point,b=Ext.apply(h.seriesLabelStyle||{},a);return h.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:k,x:d,y:c},a||{}))},onPlaceLabel:function(p,g,r,f,j,b){var l=this,k=l.chart,h=k.resizing,c=l.label,q=c.renderer,o=c.field,e=l.centerX,d=l.centerY,a={x:r.point[0],y:r.point[1]},n=a.x-e,m=a.y-d;p.setAttributes({text:q(g.get(o)),hidden:true},true);if(h){p.setAttributes({x:e,y:d},true)}if(b){p.show(true);l.onAnimate(p,{to:a})}else{p.setAttributes(a,true);p.show(true)}},toggleAll:function(a){var e=this,b,d,f,c;if(!a){Ext.chart.series.Radar.superclass.hideAll.call(e)}else{Ext.chart.series.Radar.superclass.showAll.call(e)}if(e.radar){e.radar.setAttributes({hidden:!a},true);if(e.radar.shadows){for(b=0,c=e.radar.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(a){var d=this,c=d.markerGroup&&d.markerGroup.getCount()||0,b=a||0;for(;b<c;b++){d.markerGroup.getAt(b).hide(true)}}});Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.fx.Anim"],type:"scatter",alias:"series.scatter",constructor:function(c){this.callParent(arguments);var e=this,f=e.chart.shadow,a=e.chart.surface,d,b;Ext.apply(e,c,{style:{},markerConfig:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)"}]});e.group=a.getGroup(e.seriesId);if(f){for(d=0,b=e.shadowAttributes.length;d<b;d++){e.shadowGroups.push(a.getGroup(e.seriesId+"-shadows"+d))}}},getBounds:function(){var r=this,h=r.chart,d=h.getChartStore(),n=h.axes,k=r.getAxesForXAndYFields(),j=k.xAxis,e=k.yAxis,a,s,c,f,q,o,p,m,l,b,g;r.setBBox();a=r.bbox;if(b=n.get(j)){g=b.applyData();q=g.from;p=g.to}if(b=n.get(e)){g=b.applyData();o=g.from;m=g.to}if(r.xField&&!Ext.isNumber(q)){b=r.getMinMaxXValues();q=b[0];p=b[1]}if(r.yField&&!Ext.isNumber(o)){b=r.getMinMaxYValues();o=b[0];m=b[1]}if(isNaN(q)){q=0;p=d.getCount()-1;s=a.width/(d.getCount()-1)}else{s=a.width/(p-q)}if(isNaN(o)){o=0;m=d.getCount()-1;c=a.height/(d.getCount()-1)}else{c=a.height/(m-o)}return{bbox:a,minX:q,minY:o,xScale:s,yScale:c}},getPaths:function(){var w=this,m=w.chart,b=m.shadow,e=m.getChartStore(),A=e.data.items,r,k,d,h=w.group,f=w.bounds=w.getBounds(),a=w.bbox,B=f.xScale,c=f.yScale,u=f.minX,t=f.minY,z=a.x,v=a.y,g=a.height,n=w.items=[],p=[],l,j,q,s,o;for(r=0,k=A.length;r<k;r++){d=A[r];q=d.get(w.xField);s=d.get(w.yField);if(typeof s=="undefined"||(typeof s=="string"&&!s)||q==null||s==null){continue}if(typeof q=="string"||typeof q=="object"&&!Ext.isDate(q)){q=r}if(typeof s=="string"||typeof s=="object"&&!Ext.isDate(s)){s=r}l=z+(q-u)*B;j=v+g-(s-t)*c;p.push({x:l,y:j});w.items.push({series:w,value:[q,s],point:[l,j],storeItem:d});if(m.animate&&m.resizing){o=h.getAt(r);if(o){w.resetPoint(o);if(b){w.resetShadow(o)}}}}return p},resetPoint:function(a){var b=this.bbox;a.setAttributes({translate:{x:(b.x+b.width)/2,y:(b.y+b.height)/2}},true)},resetShadow:function(c){var f=this,e=c.shadows,h=f.shadowAttributes,d=f.shadowGroups.length,g=f.bbox,b,a;for(b=0;b<d;b++){a=Ext.apply({},h[b]);if(a.translate){a.translate.x+=(g.x+g.width)/2;a.translate.y+=(g.y+g.height)/2}else{a.translate={x:(g.x+g.width)/2,y:(g.y+g.height)/2}}e[b].setAttributes(a,true)}},createPoint:function(a,c){var d=this,b=d.chart,e=d.group,f=d.bbox;return Ext.chart.Shape[c](b.surface,Ext.apply({},{x:0,y:0,group:e,translate:{x:(f.x+f.width)/2,y:(f.y+f.height)/2}},a))},createShadow:function(m,f,j){var h=this,g=h.chart,k=h.shadowGroups,d=h.shadowAttributes,a=k.length,n=h.bbox,c,l,b,e;m.shadows=b=[];for(c=0;c<a;c++){e=Ext.apply({},d[c]);if(e.translate){e.translate.x+=(n.x+n.width)/2;e.translate.y+=(n.y+n.height)/2}else{Ext.apply(e,{translate:{x:(n.x+n.width)/2,y:(n.y+n.height)/2}})}Ext.apply(e,f);l=Ext.chart.Shape[j](g.surface,Ext.apply({},{x:0,y:0,group:k[c]},e));b.push(l)}},drawSeries:function(){var t=this,k=t.chart,g=k.getChartStore(),h=t.group,c=k.shadow,a=t.shadowGroups,p=t.shadowAttributes,q=a.length,l,m,n,j,o,s,e,f,b,d,r;s=Ext.apply(t.markerStyle,t.markerConfig);f=s.type;delete s.type;if(!g||!g.getCount()){t.hide();t.items=[];return}t.unHighlightItem();t.cleanHighlights();m=t.getPaths();j=m.length;for(o=0;o<j;o++){n=m[o];l=h.getAt(o);Ext.apply(n,s);if(!l){l=t.createPoint(n,f);if(c){t.createShadow(l,s,f)}}b=l.shadows;if(k.animate){d=t.renderer(l,g.getAt(o),{translate:n},o,g);l._to=d;t.onAnimate(l,{to:d});for(e=0;e<q;e++){r=Ext.apply({},p[e]);d=t.renderer(b[e],g.getAt(o),Ext.apply({},{hidden:false,translate:{x:n.x+(r.translate?r.translate.x:0),y:n.y+(r.translate?r.translate.y:0)}},r),o,g);t.onAnimate(b[e],{to:d})}}else{d=t.renderer(l,g.getAt(o),{translate:n},o,g);l._to=d;l.setAttributes(d,true);for(e=0;e<q;e++){r=Ext.apply({},p[e]);d=t.renderer(b[e],g.getAt(o),Ext.apply({},{hidden:false,translate:{x:n.x+(r.translate?r.translate.x:0),y:n.y+(r.translate?r.translate.y:0)}},r),o,g);b[e].setAttributes(d,true)}}t.items[o].sprite=l}j=h.getCount();for(o=m.length;o<j;o++){h.getAt(o).hide(true)}t.renderLabels();t.renderCallouts()},onCreateLabel:function(d,j,c,e){var f=this,g=f.labelsGroup,a=f.label,b=Ext.apply({},a,f.seriesLabelStyle),h=f.bbox;return f.chart.surface.add(Ext.apply({type:"text",group:g,x:j.point[0],y:h.y+h.height/2},b))},onPlaceLabel:function(f,j,s,p,o,d){var u=this,k=u.chart,r=k.resizing,t=u.label,q=t.renderer,b=t.field,a=u.bbox,h=s.point[0],g=s.point[1],c=s.sprite.attr.radius,e,m,l,n;f.setAttributes({text:q(j.get(b)),hidden:true},true);if(o=="rotate"){f.setAttributes({"text-anchor":"start",rotation:{x:h,y:g,degrees:-45}},true);e=f.getBBox();m=e.width;l=e.height;h=h<a.x?a.x:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=(g-l<a.y)?a.y+l:g}else{if(o=="under"||o=="over"){e=s.sprite.getBBox();e.width=e.width||(c*2);e.height=e.height||(c*2);g=g+(o=="over"?-e.height:e.height);e=f.getBBox();m=e.width/2;l=e.height/2;h=h-m<a.x?a.x+m:h;h=(h+m>a.x+a.width)?(h-(h+m-a.x-a.width)):h;g=g-l<a.y?a.y+l:g;g=(g+l>a.y+a.height)?(g-(g+l-a.y-a.height)):g}}if(!k.animate){f.setAttributes({x:h,y:g},true);f.show(true)}else{if(r){n=s.sprite.getActiveAnimation();if(n){n.on("afteranimate",function(){f.setAttributes({x:h,y:g},true);f.show(true)})}else{f.show(true)}}else{u.onAnimate(f,{to:{x:h,y:g}})}}},onPlaceCallout:function(j,l,A,w,v,c,g){var D=this,m=D.chart,t=m.surface,z=m.resizing,C=D.callouts,n=D.items,b=A.point,E,a=j.label.getBBox(),B=30,s=10,r=3,e,d,f,q,o,u=D.bbox,k,h;E=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)];k=b[0]+E[0]*B;h=b[1]+E[1]*B;e=k+(E[0]>0?0:-(a.width+2*r));d=h-a.height/2-r;f=a.width+2*r;q=a.height+2*r;if(e<u[0]||(e+f)>(u[0]+u[2])){E[0]*=-1}if(d<u[1]||(d+q)>(u[1]+u[3])){E[1]*=-1}k=b[0]+E[0]*B;h=b[1]+E[1]*B;e=k+(E[0]>0?0:-(a.width+2*r));d=h-a.height/2-r;f=a.width+2*r;q=a.height+2*r;if(m.animate){D.onAnimate(j.lines,{to:{path:["M",b[0],b[1],"L",k,h,"Z"]}},true);D.onAnimate(j.box,{to:{x:e,y:d,width:f,height:q}},true);D.onAnimate(j.label,{to:{x:k+(E[0]>0?r:-(a.width+r)),y:h}},true)}else{j.lines.setAttributes({path:["M",b[0],b[1],"L",k,h,"Z"]},true);j.box.setAttributes({x:e,y:d,width:f,height:q},true);j.label.setAttributes({x:k+(E[0]>0?r:-(a.width+r)),y:h},true)}for(o in j){j[o].show(true)}},onAnimate:function(b,a){b.show();return this.callParent(arguments)},isItemInPoint:function(c,g,e){var b,d=10,a=Math.abs;function f(h){var j=a(h[0]-c),i=a(h[1]-g);return Math.sqrt(j*j+i*i)}b=e.point;return(b[0]-d<=c&&b[0]+d>=c&&b[1]-d<=g&&b[1]+d>=g)}});
